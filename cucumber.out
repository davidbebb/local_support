Using the default profile...
Feature: Acknowledging Contributors
  As a site administrator
  So that I can encourage continued support from vendors and developers
  I want to see acknowledgement of support on every page

  Background:  # features/admin/acknowledging_contributors_site.feature:6

  Scenario Outline: Display acknowledgements                               # features/admin/acknowledging_contributors_site.feature:8
    Given I visit the <page> page                                          # features/step_definitions/navigation_steps.rb:28
    Then I should see the "Agile Ventures" image linked to contributors    # features/step_definitions/basic_steps.rb:14
    And I should see the "Ninefold" image linked to "https://ninefold.com" # features/step_definitions/basic_steps.rb:8

    Examples: 
      | page                |
      | home                |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/acknowledging_contributors_site.feature:9:in `Given I visit the <page> page'
      | organisations index |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/acknowledging_contributors_site.feature:9:in `Given I visit the <page> page'
      | new organisation    |

Feature: Admin deleting charity
  As a Admin
  So that I can ensure that defunct charities are removed
  I want to be able to delete charities
  Tracker Story ID: https://www.pivotaltracker.com/story/show/59553308

  Background: organisations have been added to database # features/admin/admin_delete_charity.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 |
    And the following users are registered:             # features/step_definitions/factory_steps.rb:15
      | email                 | password | admin | confirmed_at         | organisation |
      | admin@example.com     | pppppppp | true  | 2007-01-01  10:00:00 |              |
      | org-admin@example.com | pppppppp | false | 2007-01-01  10:00:00 | Friendly     |
      | user@example.com      | pppppppp | false | 2007-01-01  10:00:00 |              |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90

  Scenario: Admin successfully deletes a charity   # scenario 'Admin successfully deletes a charity' do # features/admin/admin_delete_charity.feature:18
    Given I am signed in as a admin                                                                     # features/step_definitions/authentication_steps.rb:12
    And I visit the show page for the organisation named "Friendly"                                     # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_delete_charity.feature:20:in `And I visit the show page for the organisation named "Friendly"'
    And I click "Delete"                                                                                # features/step_definitions/navigation_steps.rb:95
    Then the organisation "Friendly" should be deleted                                                  # features/step_definitions/factory_steps.rb:69
    And I should see "Deleted Friendly" in the flash                                                    # features/step_definitions/navigation_steps.rb:167
    And I should be on the organisations index page                                                     # features/step_definitions/navigation_steps.rb:28

  Scenario: Org admin cannot see delete button                      # features/admin/admin_delete_charity.feature:26
    Given I am signed in as a non-admin                             # features/step_definitions/authentication_steps.rb:12
    And I visit the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_delete_charity.feature:28:in `And I visit the show page for the organisation named "Friendly"'
    And I should not see "Delete"                                   # features/step_definitions/basic_steps.rb:271

  Scenario: Non-admin cannot see delete button                      # features/admin/admin_delete_charity.feature:31
    Given I am signed in as a non-admin                             # features/step_definitions/authentication_steps.rb:12
    And I visit the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_delete_charity.feature:33:in `And I visit the show page for the organisation named "Friendly"'
    And I should not see "Delete"                                   # features/step_definitions/basic_steps.rb:271

  Scenario: Public cannot see delete button                           # features/admin/admin_delete_charity.feature:36
    Given I visit the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_delete_charity.feature:37:in `Given I visit the show page for the organisation named "Friendly"'
    And I should not see "Delete"                                     # features/step_definitions/basic_steps.rb:271

  Scenario: Non-admin unsuccessfully attempts to delete a charity directly  # features/admin/admin_delete_charity.feature:40
    Given I am signed in as a non-admin                                     # features/step_definitions/authentication_steps.rb:12
    And I delete "Friendly" charity                                         # features/step_definitions/basic_steps.rb:52
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/basic_steps.rb:54:in `/^I delete "(.*?)" charity$/'
      features/admin/admin_delete_charity.feature:42:in `And I delete "Friendly" charity'
    Then I should be on the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55
    And I should see permission denied                                      # features/step_definitions/basic_steps.rb:18

Feature: Admin editing charity
  As a site admin
  So that I can ensure that charity information (for someone else) is correct (including adding a new organisation)
  I want to be able to edit/delete/add any charity information
  Tracker Story ID: https://www.pivotaltracker.com/story/show/50368203

  Background: organisations have been added to database # features/admin/admin_edit_charity.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name           | description             | address        | postcode | telephone |
      | Friendly       | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 |
      | Friendly Clone | Quite Friendly!         | 30 pinner road | HA1 4HZ  | 020800010 |
    And the following users are registered:             # features/step_definitions/factory_steps.rb:15
      | email                         | password | admin | confirmed_at         | organisation |
      | registered-user-1@example.com | pppppppp | true  | 2007-01-01  10:00:00 | Friendly     |
      | registered-user-2@example.com | pppppppp | false | 2007-01-01  10:00:00 |              |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90

  Scenario: Admin successfully changes the address of a charity    # features/admin/admin_edit_charity.feature:18
    Given I am signed in as a admin                                # features/step_definitions/authentication_steps.rb:12
    And I update "Friendly" charity address to be "30 pinner road" # features/step_definitions/basic_steps.rb:111
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:112:in `/^I update "(.*?)" charity address to be "(.*?)"( when Google is indisposed)?$/'
      features/admin/admin_edit_charity.feature:20:in `And I update "Friendly" charity address to be "30 pinner road"'
    Then the address for "Friendly" should be "30 pinner road"     # features/step_definitions/basic_steps.rb:299

  #TODO Refactor into integration test that posts to update method
  #  Scenario: Non-admin unsuccessfully attempts to change the address of a charity
  #    Given I am signed in as a non-admin
  #    And I furtively update "Friendly" charity address to be "30 pinner road"
  #    Then I should see "You don't have permission"
  #    And "Friendly" charity address is "34 pinner road"
  Scenario: Non-admin sees no permission error when visiting the edit form for charity # features/admin/admin_edit_charity.feature:30
    Given I am signed in as a non-admin                                                # features/step_definitions/authentication_steps.rb:12
    And I visit the edit page for the organisation named "Friendly"                    # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_edit_charity.feature:32:in `And I visit the edit page for the organisation named "Friendly"'
    Then I should be on the show page for the organisation named "Friendly"            # features/step_definitions/navigation_steps.rb:55
    And I should see permission denied                                                 # features/step_definitions/basic_steps.rb:18

Feature: I want to be able to edit static page links
  As a site admin
  So that I can maintain my website
  I want to be able to edit static page link position
  Tracker story ID: https://www.pivotaltracker.com/story/show/52536437

  Background: organisations have been added to database # features/admin/admin_edit_static_page_links.feature:7
    Given the following pages exist:                    # features/step_definitions/factory_steps.rb:45
      | name         | permalink | content | link_visible |
      | About HCN    | about     | abc123  | true         |
      | Contact Info | contact   | 123ccc  | false        |
    And the following users are registered:             # features/step_definitions/factory_steps.rb:15
      | email                         | password | admin | confirmed_at         | organisation |
      | registered-user-1@example.com | pppppppp | true  | 2007-01-01  10:00:00 | Friendly     |
      | registered-user-2@example.com | pppppppp | false | 2007-01-01  10:00:00 |              |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90

  Scenario: Having all pages show automatically # features/admin/admin_edit_static_page_links.feature:19
    And I visit the home page                   # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_edit_static_page_links.feature:20:in `And I visit the home page'
    Then I should see "About HCN"               # features/step_definitions/basic_steps.rb:271
    And I should not see "Contact Info"         # features/step_definitions/basic_steps.rb:271

  Scenario: Admin can unlink and then link page, using its edit page # features/admin/admin_edit_static_page_links.feature:24
    Given I am signed in as an admin                                 # features/step_definitions/authentication_steps.rb:12
    And I visit "pages/about/edit"                                   # features/step_definitions/navigation_steps.rb:5
    And I uncheck "Show a public link to this page"                  # features/step_definitions/basic_steps.rb:402
    And I press "Update Page"                                        # features/step_definitions/navigation_steps.rb:91
    And I visit the home page                                        # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_edit_static_page_links.feature:29:in `And I visit the home page'
    Then the "about" link is not in the footer                       # features/step_definitions/static_pages_steps.rb:35
    And I visit "pages/about/edit"                                   # features/step_definitions/navigation_steps.rb:5
    And I check "Show a public link to this page"                    # features/step_definitions/basic_steps.rb:402
    And I press "Update Page"                                        # features/step_definitions/navigation_steps.rb:91
    And I visit the home page                                        # features/step_definitions/navigation_steps.rb:28
    Then the "about" link is in the footer                           # features/step_definitions/static_pages_steps.rb:39

Feature: I want to be able to edit static pages
  As a site admin
  So that I can update my website
  I want to be able to edit static pages via markdown
  Tracker story ID: https://www.pivotaltracker.com/story/show/52536437

  Background: organisations have been added to database                                   # features/admin/admin_edit_static_pages.feature:7
    Given the following pages exist:                                                      # features/step_definitions/factory_steps.rb:45
      | name     | permalink | content    | link_visible |
      | About Us | about     | abc123     | true         |
      | Wow      | wow       | wow678     | true         |
      | Bob      | bob       | bobcontent | true         |
    And the following users are registered:                                               # features/step_definitions/factory_steps.rb:15
      | email                         | password | admin | confirmed_at         | organisation |
      | registered-user-1@example.com | pppppppp | true  | 2007-01-01  10:00:00 | Friendly     |
      | registered-user-2@example.com | pppppppp | false | 2007-01-01  10:00:00 |              |
    And cookies are approved                                                              # features/step_definitions/authentication_steps.rb:90
    And a static page named "Contact Info" with permalink "contact" and markdown content: # features/step_definitions/factory_steps.rb:52
      """
      This is a *significant* word

      This is **important** text

      1.  Numbered list

      *  Bullet list

      ### This is an h3 header

      Here is a [link to relishapp](http://relishapp.com)
      and another link: www.relishapp.com

      This _message_ is important too.
      """

  Scenario: Admin can edit                                                                # features/admin/admin_edit_static_pages.feature:36
    Given I am signed in as a admin                                                       # features/step_definitions/authentication_steps.rb:12
    And I visit the home page                                                             # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_edit_static_pages.feature:38:in `And I visit the home page'
    When I follow "About Us"                                                              # features/step_definitions/navigation_steps.rb:104
    Then I should see a link with text "Edit"                                             # features/step_definitions/basic_steps.rb:245
    And I follow "Edit"                                                                   # features/step_definitions/navigation_steps.rb:104
    Then I should be on the edit page for "about"                                         # features/step_definitions/static_pages_steps.rb:1

  Scenario: Non-admin cannot edit                                                         # features/admin/admin_edit_static_pages.feature:44
    Given I am signed in as a non-admin                                                   # features/step_definitions/authentication_steps.rb:12
    And I visit the home page                                                             # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_edit_static_pages.feature:46:in `And I visit the home page'
    When I follow "About Us"                                                              # features/step_definitions/navigation_steps.rb:104
    Then I should not see a link with text "Edit"                                         # features/step_definitions/basic_steps.rb:245

  Scenario: Admin can see pages index                                                     # features/admin/admin_edit_static_pages.feature:50
    Given I am signed in as a admin                                                       # features/step_definitions/authentication_steps.rb:12
    And I visit the home page                                                             # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_edit_static_pages.feature:52:in `And I visit the home page'
    When I follow "About Us"                                                              # features/step_definitions/navigation_steps.rb:104
    And I follow "Pages"                                                                  # features/step_definitions/navigation_steps.rb:104
    Then the URL should contain "pages"                                                   # features/step_definitions/basic_steps.rb:346

  Scenario: Pages index is sorted by default                                              # features/admin/admin_edit_static_pages.feature:57
    Given I am signed in as a admin                                                       # features/step_definitions/authentication_steps.rb:12
    And I visit the home page                                                             # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_edit_static_pages.feature:59:in `And I visit the home page'
    When I follow "About Us"                                                              # features/step_definitions/navigation_steps.rb:104
    And I follow "Pages"                                                                  # features/step_definitions/navigation_steps.rb:104
    Then I should see "Bob" page before "Wow"                                             # features/step_definitions/basic_steps.rb:430

  Scenario: Non-admin cannot see pages index                                              # features/admin/admin_edit_static_pages.feature:64
    Given I am signed in as a non-admin                                                   # features/step_definitions/authentication_steps.rb:12
    And I visit "/pages"                                                                  # features/step_definitions/navigation_steps.rb:5
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:6:in `/^I visit "(.*?)"$/'
      features/admin/admin_edit_static_pages.feature:66:in `And I visit "/pages"'
    Then I should see "You must be signed in as an admin to perform this action!"         # features/step_definitions/basic_steps.rb:271
    And I should be on the home page                                                      # features/step_definitions/navigation_steps.rb:28

  Scenario: Static pages are editable                                                     # features/admin/admin_edit_static_pages.feature:70
    Given I am signed in as a admin                                                       # features/step_definitions/authentication_steps.rb:12
    And I am on the edit page with the "about" permalink                                  # features/step_definitions/static_pages_steps.rb:17
    And I fill in "page_name" with "new name" within the main body                        # features/step_definitions/basic_steps.rb:307
    And I fill in "page_permalink" with "new_link" within the main body                   # features/step_definitions/basic_steps.rb:307
    And I fill in "page_content" with "xyz789" within the main body                       # features/step_definitions/basic_steps.rb:307
    And I press "Update Page"                                                             # features/step_definitions/navigation_steps.rb:91
    And the URL should contain "new_link"                                                 # features/step_definitions/basic_steps.rb:346
    And I should see "xyz789"                                                             # features/step_definitions/basic_steps.rb:271

  Scenario: Basic markdown syntax works                                                   # features/admin/admin_edit_static_pages.feature:80
    Given I visit the home page                                                           # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_edit_static_pages.feature:81:in `Given I visit the home page'
    When I follow "Contact"                                                               # features/step_definitions/navigation_steps.rb:104
    Then I should see "significant" < emphasized >                                        # features/step_definitions/basic_steps.rb:350
    And I should see "important" < stronged >                                             # features/step_definitions/basic_steps.rb:350
    And I should see "Numbered list" < number listed >                                    # features/step_definitions/basic_steps.rb:350
    And I should see "Bullet list" < bullet listed >                                      # features/step_definitions/basic_steps.rb:350
    And I should see "This is an h3 header" < tagged > with "h3"                          # features/step_definitions/basic_steps.rb:355
    And I should see "link to relishapp" < linked > to "http://relishapp.com"             # features/step_definitions/basic_steps.rb:360
    And I should see "www.relishapp.com" < linked > to "http://www.relishapp.com"         # features/step_definitions/basic_steps.rb:360
    And I should see "message" < emphasized >                                             # features/step_definitions/basic_steps.rb:350

Feature: Admin can edit volunteer opportunites
  As a site admin
  I would like to edit volunteer opportunities
  so that I can correct errors made by site users.
  https://www.pivotaltracker.com/story/show/73959288

  Background:                                        # features/admin/admin_edit_volunteer_op.feature:7
    Given the following organisations exist:         # features/step_definitions/factory_steps.rb:8
      | name        | description    | address        | postcode |
      | Cats Are Us | Animal Shelter | 34 pinner road | HA1 4HZ  |
    And the following users are registered:          # features/step_definitions/factory_steps.rb:15
      | email                         | password | organisation | confirmed_at        | admin |
      | admin@harrowcn.org.uk         | pppppppp |              | 2007-01-01 10:00:00 | true  |
      | registered-user-2@example.com | pppppppp |              | 2007-01-01 10:00:00 | false |
    And the following volunteer opportunities exist: # features/step_definitions/factory_steps.rb:24
      | title              | description                   | organisation |
      | Litter Box Scooper | Assist with feline sanitation | Cats Are Us  |

  Scenario:                                                                         # features/admin/admin_edit_volunteer_op.feature:19
    Given I am signed in as an admin                                                # features/step_definitions/authentication_steps.rb:12
    When I visit the show page for the volunteer_op titled "Litter Box Scooper"     # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_edit_volunteer_op.feature:21:in `When I visit the show page for the volunteer_op titled "Litter Box Scooper"'
    Then I should see an edit button for "Litter Box Scooper" volunteer opportunity # features/step_definitions/basic_steps.rb:63

  Scenario:                                                                             # features/admin/admin_edit_volunteer_op.feature:24
    Given I am signed in as a non-admin                                                 # features/step_definitions/authentication_steps.rb:12
    When I visit the show page for the volunteer_op titled "Litter Box Scooper"         # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_edit_volunteer_op.feature:26:in `When I visit the show page for the volunteer_op titled "Litter Box Scooper"'
    Then I should not see an edit button for "Litter Box Scooper" volunteer opportunity # features/step_definitions/basic_steps.rb:63

  Scenario:                                                                             # features/admin/admin_edit_volunteer_op.feature:29
    When I visit the show page for the volunteer_op titled "Litter Box Scooper"         # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_edit_volunteer_op.feature:31:in `When I visit the show page for the volunteer_op titled "Litter Box Scooper"'
    Then I should not see an edit button for "Litter Box Scooper" volunteer opportunity # features/step_definitions/basic_steps.rb:63

  Scenario: Admin successfully changes the description of an opportunity                  # features/admin/admin_edit_volunteer_op.feature:34
    Given I am signed in as an admin                                                      # features/step_definitions/authentication_steps.rb:12
    When I update "Litter Box Scooper" volunteer op description to be "Clean up cat mess" # features/step_definitions/volunteer_op_steps.rb:19
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/volunteer_op_steps.rb:21:in `/^I update "(.*?)" volunteer op description to be "(.*?)"$/'
      features/admin/admin_edit_volunteer_op.feature:36:in `When I update "Litter Box Scooper" volunteer op description to be "Clean up cat mess"'
    Then I should see "Clean up cat mess"                                                 # features/step_definitions/basic_steps.rb:271

Feature: Admin creating charity
  As a Admin
  So that I can add new charities to the site)
  I want to be able to create new charities

  Background: organisations have been added to database # features/admin/admin_new_charity.feature:6
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name           | description             | address        | postcode | telephone |
      | Friendly       | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 |
      | Friendly Clone | Quite Friendly!         | 30 pinner road | HA1 4HZ  | 020800010 |
    And the following users are registered:             # features/step_definitions/factory_steps.rb:15
      | email                         | password | admin | confirmed_at         | organisation |
      | registered-user-1@example.com | pppppppp | true  | 2007-01-01  10:00:00 | Friendly     |
      | registered-user-2@example.com | pppppppp | false | 2007-01-01  10:00:00 |              |
    And the following categories exist:                 # features/step_definitions/factory_steps.rb:31
      | name              | charity_commission_id |
      | Animal welfare    | 101                   |
      | Child welfare     | 102                   |
      | Feed the hungry   | 103                   |
      | Accommodation     | 203                   |
      | General           | 204                   |
      | Health            | 202                   |
      | Education         | 303                   |
      | Give them things  | 304                   |
      | Teach them things | 305                   |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90

  Scenario: Unsuccessfully attempt to create charity without being signed-in # features/admin/admin_new_charity.feature:29
    Given I visit the new organisation page                                  # features/step_definitions/navigation_steps.rb:28
    Then I should be on the sign in page                                     # features/step_definitions/navigation_steps.rb:28

  # beta version only allows admin to create new organisation, currently
  # we only show link to admin, and are waiting on proper enforcement feature
  # TODO get scenario as following commented one
  #Scenario: Unsuccessfully attempt to create charity when signed-in as non-admin
  ## should this be checking for absence of link to the new org page?
  #Given I am signed in as a non-admin
  #Given I visit the new organisation page
  #Then I should be on the sign in page
  Scenario: Successfully create charity while being signed-in as admin # features/admin/admin_new_charity.feature:44
    Given I am signed in as a admin                                    # features/step_definitions/authentication_steps.rb:12
    And I have created a new organisation                              # features/step_definitions/basic_steps.rb:138
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      ./features/step_definitions/basic_steps.rb:139:in `/^I have created a new organisation$/'
      features/admin/admin_new_charity.feature:46:in `And I have created a new organisation'
    Then I should see "Organisation was successfully created."         # features/step_definitions/basic_steps.rb:271

  Scenario: Successfully create charity while being signed-in as admin from arbitrary page # features/admin/admin_new_charity.feature:49
    Given I am signed in as a admin                                                        # features/step_definitions/authentication_steps.rb:12
    Given I visit the show page for the organisation named "Friendly Clone"                # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/admin_new_charity.feature:51:in `Given I visit the show page for the organisation named "Friendly Clone"'
    And I follow "New Organisation"                                                        # features/step_definitions/navigation_steps.rb:104
    And I fill in the new charity page validly including the categories:                   # features/step_definitions/basic_steps.rb:88
      | name            |
      | Feed the hungry |
      | Accommodation   |
    And I press "Create Organisation"                                                      # features/step_definitions/navigation_steps.rb:91
    Then I should see "Organisation was successfully created."                             # features/step_definitions/basic_steps.rb:271
    And I should see "Feed the hungry"                                                     # features/step_definitions/basic_steps.rb:271
    And I should see "Accommodation"                                                       # features/step_definitions/basic_steps.rb:271
    And I should not see "General"                                                         # features/step_definitions/basic_steps.rb:271

  Scenario: Non-admin unsuccessfully attempts to create an organisation # features/admin/admin_new_charity.feature:63
    Given I am signed in as a non-admin                                 # features/step_definitions/authentication_steps.rb:12
    And I create "Unwanted" org                                         # features/step_definitions/basic_steps.rb:311
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/basic_steps.rb:312:in `/^I create "(.*?)" org$/'
      features/admin/admin_new_charity.feature:65:in `And I create "Unwanted" org'
    Then I should be on the organisations index page                    # features/step_definitions/navigation_steps.rb:28
    Then I should see permission denied                                 # features/step_definitions/basic_steps.rb:18
    And I should not see "Organisation was successfully created."       # features/step_definitions/basic_steps.rb:271
    And "Unwanted" org should not exist                                 # features/step_definitions/basic_steps.rb:315

  Scenario: non logged in user should not see new organisation link # features/admin/admin_new_charity.feature:71
    Given I visit the home page                                     # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_new_charity.feature:72:in `Given I visit the home page'
    Then I should not see a new organisations link                  # features/step_definitions/basic_steps.rb:253

  Scenario: logged in non-admin user should not see new organisation link # features/admin/admin_new_charity.feature:75
    Given I am signed in as a non-admin                                   # features/step_definitions/authentication_steps.rb:12
    Given I visit the home page                                           # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_new_charity.feature:77:in `Given I visit the home page'
    Then I should not see a new organisations link                        # features/step_definitions/basic_steps.rb:253

Feature: Site admin notified of new signups
  As a site admin
  So that I can be responsive to new users
  I want to be notified when they sign up

  #  Tracker story ID: https://www.pivotaltracker.com/story/show/59112122
  Background:                                 # features/admin/admin_notified_on_signup.feature:7
    Given the following users are registered: # features/step_definitions/factory_steps.rb:15
      | email               | password | admin | confirmed_at         | organisation |
      | admin@harrowcn.com  | pppppppp | true  | 2007-01-01  10:00:00 | Friendly     |
      | admin2@harrowcn.com | pppppppp | true  | 2007-01-01  10:00:00 | Friendly     |
    And the email queue is clear              # features/step_definitions/email_steps.rb:28
    And cookies are approved                  # features/step_definitions/authentication_steps.rb:90

  Scenario: Email is sent when new user signs up                                                                                # features/admin/admin_notified_on_signup.feature:15
    Given I visit the sign up page                                                                                              # features/step_definitions/navigation_steps.rb:28
    When I sign up as "non-existent-user@example.com" with password "pppppppp" and password confirmation "pppppppp"             # features/step_definitions/authentication_steps.rb:23
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/authentication_steps.rb:36:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/authentication_steps.rb:32:in `/^I sign up as "(.*?)" with password "(.*?)" and password confirmation "(.*?)"( on the legacy sign up page)?$/'
      features/admin/admin_notified_on_signup.feature:17:in `When I sign up as "non-existent-user@example.com" with password "pppppppp" and password confirmation "pppppppp"'
    Then an email should be sent to "admin@harrowcn.com" as notification of the signup by email "non-existent-user@example.com" # features/step_definitions/email_steps.rb:9
    And an email should be sent to "admin2@harrowcn.com" as notification of the signup by email "non-existent-user@example.com" # features/step_definitions/email_steps.rb:9

Feature: Admin promoting site
  As a site administrator
  So that people recognize our brand
  I want to have the site name displayed prominently
  Tracker story ID: https://www.pivotaltracker.com/story/show/50372317

  Background:  # features/admin/admin_promoting_site.feature:7

  Scenario Outline: Be aware of site identity on all pages                    # features/admin/admin_promoting_site.feature:9
    Given I visit the <page>                                                  # features/step_definitions/navigation_steps.rb:28
    Then I should see "Harrow Community Network"                              # features/step_definitions/basic_steps.rb:271
    And I should see "Search for local voluntary and community organisations" # features/step_definitions/basic_steps.rb:271

    Examples: 
      | page                     |
      | home page                |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_promoting_site.feature:10:in `Given I visit the <page>'
      | organisations index page |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/admin_promoting_site.feature:10:in `Given I visit the <page>'
      | new organisation page    |

Feature: import categories from CSV
  As a Site Admin
  So that Organisations can be categorized in accordance with governmental designations
  I want to import external lists of Categories and associate them with Organisations

  Scenario:                                                            # features/admin/category_import.feature:7
    Given I can run the rake task "bundle exec rake db:cat_org_import" # features/step_definitions/basic_steps.rb:460

Feature: import email addresses
  As a Site Admin
  So that I enable contacting organisations
  I want to import emails for those organisations that do not have emails and not overwrite existing emails

  Background: organisations have been added to database # features/admin/import_email.feature:6
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name           | description            | address        | postcode | website       | email         |
      | I love dogs    | loves canines          | 34 pinner road | HA1 4HZ  | http://a.com/ | fred@dogs.com |
      | I love cats    | loves felines          | 64 pinner road | HA1 4HA  | http://b.com/ |               |
      | I hate animals | hates birds and beasts | 84 pinner road | HA1 4HF  | http://c.com/ |               |
    And a file exists:                                  # features/step_definitions/factory_steps.rb:59
      | Organisation   | Charity no. | Address 1 | Address 2 | Postcode | Phone | crb phoned | e-mail              |
      | I love dogs    |             |           |           |          |       |            | admin@dogs.com      |
      | I love Cats    |             |           |           |          |       |            | admin@cats.com      |
      | I hate animals |             |           |           |          |       |            | admin@cruelty.com   |
      | I love people  |             |           |           |          |       |            | people@humanity.org |

  Scenario: import email addresses                              # features/admin/import_email.feature:19
    Given Google is indisposed for "64 pinner road"             # features/step_definitions/map_steps.rb:94
I love dogs was not found
I love Cats was found
I hate animals was found
I love people was not found
    And I import emails from "db/email_test.csv"                # features/step_definitions/email_steps.rb:42
    Then "I love dogs" should have email "fred@dogs.com"        # features/step_definitions/basic_steps.rb:319
    Then "I love cats" should have email "admin@cats.com"       # features/step_definitions/basic_steps.rb:319
    Then "I hate animals" should have email "admin@cruelty.com" # features/step_definitions/basic_steps.rb:319
    And "I love cats" should not have nil coordinates           # features/step_definitions/map_steps.rb:102

Feature: Admin user interface
  As a site admin
  So that I can have a commanding view of important information
  I want a specialized interface

  Background:                                       # features/admin/navbar.feature:6
    Given the following pages exist:                # features/step_definitions/factory_steps.rb:45
      | name     | permalink | content |
      | About Us | about     | abc123  |
    And the following users are registered:         # features/step_definitions/factory_steps.rb:15
      | email                 | password       | admin | confirmed_at        | organisation | pending_organisation |
      | admin@harrowcn.org.uk | mypassword1234 | true  | 2008-01-01 00:00:00 |              |                      |
    And I am signed in as a admin                   # features/step_definitions/authentication_steps.rb:12
    And that the volunteer_ops_list flag is enabled # features/step_definitions/volunteer_op_steps.rb:11
    And I visit the home page                       # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/navbar.feature:15:in `And I visit the home page'

  Scenario Outline: Top navbar has an Admin dropdown menu # features/admin/navbar.feature:17
    Then the Admin menu has a valid <link> link           # features/step_definitions/basic_steps.rb:22

    Examples: 
      | link                        |
      | Organisations Without Users |
      | Invited Users               |
      | All Users                   |

  Scenario: Highlighted button for Organisations or Volunteers # features/admin/navbar.feature:25
    Given I visit the organisations index page                 # features/step_definitions/navigation_steps.rb:28
    Then navbar button "Organisations" should be active        # features/step_definitions/navigation_steps.rb:147
    Then navbar button "Volunteers" should not be active       # features/step_definitions/navigation_steps.rb:147
    Given I visit the volunteer opportunities page             # features/step_definitions/navigation_steps.rb:28
    Then navbar button "Volunteers" should be active           # features/step_definitions/navigation_steps.rb:147
    Then navbar button "Organisations" should not be active    # features/step_definitions/navigation_steps.rb:147
    Given I visit "/pages"                                     # features/step_definitions/navigation_steps.rb:5
    Then navbar button "Volunteers" should not be active       # features/step_definitions/navigation_steps.rb:147
    Then navbar button "Organisations" should not be active    # features/step_definitions/navigation_steps.rb:147

Feature: Orphans UI
  As the site owner
  So that I look up orphan orgs and email prospective users
  I want a UI that shows me orphan orgs and allows me to generate user accounts for them

  Background:                                          # features/admin/organisation_reports/without_users.feature:6
    Given the following organisations exist:           # features/step_definitions/factory_steps.rb:8
      | name               | address        | email             |
      | The Organisation   | 83 pinner road | no_owner@org.org  |
      | The Same Email Org | 84 pinner road | no_owner@org.org  |
      | Crazy Email Org    | 30 pinner road | sahjkgdsfsajnfds  |
      | My Organisation    | 30 pinner road | admin@myorg.com   |
      | Yet Another Org    | 30 pinner road | admin@another.org |
    And the following users are registered:            # features/step_definitions/factory_steps.rb:15
      | email                 | password       | admin | confirmed_at        | organisation    | pending_organisation |
      | nonadmin@myorg.com    | mypassword1234 | false | 2008-01-01 00:00:00 |                 |                      |
      | admin@myorg.com       | adminpass0987  | true  | 2008-01-01 00:00:00 | My Organisation |                      |
      | pending@myorg.com     | password123    | false | 2008-01-01 00:00:00 |                 | My Organisation      |
      | invited-admin@org.org | password123    | false | 2008-01-01 00:00:00 |                 |                      |
    And the admin invited a user for "Yet Another Org" # features/step_definitions/organisation_reports/without_users_steps.rb:19

  @javascript
  Scenario: Admin can invite users but only for unique emails                                              # features/admin/organisation_reports/without_users.feature:23
    Given cookies are approved                                                                             # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as an admin                                                                       # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page                                                       # features/step_definitions/navigation_steps.rb:28
    And I check the box for "The Organisation"                                                             # features/step_definitions/organisation_reports/without_users_steps.rb:8
    And I check the box for "The Same Email Org"                                                           # features/step_definitions/organisation_reports/without_users_steps.rb:8
    When I click id "invite_users"                                                                         # features/step_definitions/navigation_steps.rb:99
    Then I should see "Invited!" in the response field for "The Organisation"                              # features/step_definitions/organisation_reports/without_users_steps.rb:1
    Then I should see "Error: Email has already been taken" in the response field for "The Same Email Org" # features/step_definitions/organisation_reports/without_users_steps.rb:1

  Scenario: Already invited organisations don't appear # features/admin/organisation_reports/without_users.feature:33
    Given cookies are approved                         # features/step_definitions/authentication_steps.rb:90
    And I am signed in as an admin                     # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page   # features/step_definitions/navigation_steps.rb:28
    Then I should not see "Yet Another Org"            # features/step_definitions/basic_steps.rb:271

  @javascript
  Scenario: Admin should be notified when email is invalid                                  # features/admin/organisation_reports/without_users.feature:40
    Given cookies are approved                                                              # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as an admin                                                        # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page                                        # features/step_definitions/navigation_steps.rb:28
    And I check the box for "Crazy Email Org"                                               # features/step_definitions/organisation_reports/without_users_steps.rb:8
    When I click id "invite_users"                                                          # features/step_definitions/navigation_steps.rb:99
    Then I should see "Error: Email is invalid" in the response field for "Crazy Email Org" # features/step_definitions/organisation_reports/without_users_steps.rb:1

  Scenario: As a non-admin trying to access orphans index                        # features/admin/organisation_reports/without_users.feature:48
    Given cookies are approved                                                   # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as a non-admin                                          # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page                             # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/organisation_reports/without_users.feature:51:in `And I visit the organisations without users page'
    Then I should be on the home page                                            # features/step_definitions/navigation_steps.rb:28
    And I should see "You must be signed in as an admin to perform this action!" # features/step_definitions/basic_steps.rb:271

  #These next two scenarios apply to layouts/invitation_table
  @javascript
  Scenario: Table columns should be sortable                      # features/admin/organisation_reports/without_users.feature:57
    Given cookies are approved                                    # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as an admin                              # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page              # features/step_definitions/navigation_steps.rb:28
    And I click tableheader "Name"                                # features/step_definitions/navigation_steps.rb:142
    Then I should see "Crazy Email Org" before "The Organisation" # features/step_definitions/basic_steps.rb:182
    When I click tableheader "Name"                               # features/step_definitions/navigation_steps.rb:142
    Then I should see "The Organisation" before "Crazy Email Org" # features/step_definitions/basic_steps.rb:182

  @javascript
  Scenario: Select All button toggles all checkboxes   # features/admin/organisation_reports/without_users.feature:67
    Given cookies are approved                         # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as an admin                   # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page   # features/step_definitions/navigation_steps.rb:28
    And I press "Select All"                           # features/step_definitions/navigation_steps.rb:91
    Then all the checkboxes should be checked          # features/step_definitions/organisation_reports/without_users_steps.rb:14
    When I press "Select All"                          # features/step_definitions/navigation_steps.rb:91
    Then all the checkboxes should be unchecked        # features/step_definitions/organisation_reports/without_users_steps.rb:14

  #The next two scenarios check the flow of the user accepting the invitation
  Scenario: Invited user clicking through on email with cookies policy clicked     # features/admin/organisation_reports/without_users.feature:77
    Given I click on the invitation link in the email to "admin@another.org"       # features/step_definitions/authentication_steps.rb:118
    And I accepted the cookie policy from the "invitation" page                    # features/step_definitions/authentication_steps.rb:124
    And I set my password                                                          # features/step_definitions/authentication_steps.rb:129
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:92:in `/^I press "(.*?)"$/'
      ./features/step_definitions/authentication_steps.rb:132:in `/^I set my password/'
      features/admin/organisation_reports/without_users.feature:80:in `And I set my password'
    Then I should be on the show page for the organisation named "Yet Another Org" # features/step_definitions/navigation_steps.rb:55

  Scenario: Invited user clicking through on email ignoring cookies policy         # features/admin/organisation_reports/without_users.feature:83
    Given I click on the invitation link in the email to "admin@another.org"       # features/step_definitions/authentication_steps.rb:118
    And I set my password                                                          # features/step_definitions/authentication_steps.rb:129
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:92:in `/^I press "(.*?)"$/'
      ./features/step_definitions/authentication_steps.rb:132:in `/^I set my password/'
      features/admin/organisation_reports/without_users.feature:85:in `And I set my password'
    Then I should be on the show page for the organisation named "Yet Another Org" # features/step_definitions/navigation_steps.rb:55

  Scenario: Invited user email is out of date                                          # features/admin/organisation_reports/without_users.feature:88
    Given cookies are approved                                                         # features/step_definitions/authentication_steps.rb:90
    And I am signed in as an admin                                                     # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page                                   # features/step_definitions/navigation_steps.rb:28
    Then I should not see "Yet Another Org"                                            # features/step_definitions/basic_steps.rb:271
    When I edit the charity email of "Yet Another Org" to be "other_email@charity.com" # features/step_definitions/basic_steps.rb:120
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:121:in `/^I edit the charity email of "(.*?)" to be "(.*?)"$/'
      features/admin/organisation_reports/without_users.feature:93:in `When I edit the charity email of "Yet Another Org" to be "other_email@charity.com"'
    And I visit the organisations without users page                                   # features/step_definitions/navigation_steps.rb:28
    Then I should see "Yet Another Org"                                                # features/step_definitions/basic_steps.rb:271

Feature: Site Admin approves a charity edit
  As an Admin
  So that I can approve someone else's changes to a charity
    (mainly for a newly registered organisation or an organisation
    who has asked to update their details but we have yet to
    approve them as a user for the site)
  I want to be alerted to the new details, be able to see the changes
    and approve / reject or contact the relevant organisation.

Feature: Admin approve user
  As an Admin
  So that I can approve someone to be able to make edits for a particular charity
    (either by sending a verification e-mail to an e-mail address we know is
     connected to the relevant charity, when someone contacts us saying that
     this is his charity or when a new charity wants to be included on the database)
  I want to be able to verify the organisation/user and give them access to their charity.

Feature: Admin Overview
  As an Admin
  So I can have a view of all the recent changes in the site made by the individual charities.
  I want to have an overview of the updates being made so i can check if needed and
    have an understanding on how the site is being used.

Feature: All Users Page
  As a Site Admin
  So that I can approve someone to be able to make edits for a particular charity
  (assuming charity admin has requested access to become charity admin and email has been sent)
  Or so that I can delete a user
  I want to be able to see all users displayed in a table, with various actions

  Background:                                # features/admin/user_reports/admin_approve_charity_admin.feature:8
    Given the following organisations exist: # features/step_definitions/factory_steps.rb:8
      | name            | address        |
      | My Organisation | 83 pinner road |
    And the following users are registered:  # features/step_definitions/factory_steps.rb:15
      | email              | password       | admin | confirmed_at        | organisation    | pending_organisation |
      | nonadmin@myorg.com | mypassword1234 | false | 2008-01-01 00:00:00 |                 |                      |
      | admin@myorg.com    | adminpass0987  | true  | 2008-01-01 00:00:00 | My Organisation |                      |
      | pending@myorg.com  | password123    | false | 2008-01-01 00:00:00 |                 | My Organisation      |
    And cookies are approved                 # features/step_definitions/authentication_steps.rb:90

  Scenario: As an admin approving a pending users request            # features/admin/user_reports/admin_approve_charity_admin.feature:19
    Given I am signed in as an admin                                 # features/step_definitions/authentication_steps.rb:12
    When I approve "pending@myorg.com"                               # features/step_definitions/basic_steps.rb:369
    Then I should see "You have approved pending@myorg.com."         # features/step_definitions/basic_steps.rb:271
    Then "pending@myorg.com" is a charity admin of "My Organisation" # features/step_definitions/basic_steps.rb:378

  Scenario: As an admin deleting a user                     # features/admin/user_reports/admin_approve_charity_admin.feature:25
    Given I am signed in as an admin                        # features/step_definitions/authentication_steps.rb:12
    When I delete "pending@myorg.com"                       # features/step_definitions/basic_steps.rb:384
    Then I should see "You have deleted pending@myorg.com." # features/step_definitions/basic_steps.rb:271
    Then user "pending@myorg.com" is deleted                # features/step_definitions/basic_steps.rb:397

  Scenario: As an admin recovering a deleted user              # features/admin/user_reports/admin_approve_charity_admin.feature:31
    Given I am signed in as an admin                           # features/step_definitions/authentication_steps.rb:12
    When I delete "pending@myorg.com"                          # features/step_definitions/basic_steps.rb:384
    Then user "pending@myorg.com" is deleted                   # features/step_definitions/basic_steps.rb:397
    And sysadmin restores "pending@myorg.com" from the console # features/step_definitions/sysadmin_steps.rb:5
    Then user "pending@myorg.com" should exist                 # features/step_definitions/basic_steps.rb:392

  Scenario: As an admin attempting self-deletion              # features/admin/user_reports/admin_approve_charity_admin.feature:38
    Given I am signed in as an admin                          # features/step_definitions/authentication_steps.rb:12
    When I delete "admin@myorg.com"                           # features/step_definitions/basic_steps.rb:384
    Then I should see "You may not destroy your own account!" # features/step_definitions/basic_steps.rb:271
    Then user "admin@myorg.com" is not deleted                # features/step_definitions/basic_steps.rb:397

  Scenario Outline: As an admin I should be able to see status of all users # features/admin/user_reports/admin_approve_charity_admin.feature:44
    Given I am signed in as an admin                                        # features/step_definitions/authentication_steps.rb:12
    And I visit the all users page                                          # features/step_definitions/navigation_steps.rb:28
    Then I should see "<email>"                                             # features/step_definitions/basic_steps.rb:271

    Examples: 
      | email              |
      | nonadmin@myorg.com |
      | admin@myorg.com    |
      | pending@myorg.com  |

  Scenario: As a non-admin trying to access users index                          # features/admin/user_reports/admin_approve_charity_admin.feature:54
    Given I am signed in as a non-admin                                          # features/step_definitions/authentication_steps.rb:12
    And I visit the all users page                                               # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/admin/user_reports/admin_approve_charity_admin.feature:56:in `And I visit the all users page'
    Then I should be on the home page                                            # features/step_definitions/navigation_steps.rb:28
    And I should see "You must be signed in as an admin to perform this action!" # features/step_definitions/basic_steps.rb:271

Feature: Fix Associations
  As a site owner
  So that my invitations can stop breaking
  I want to associate all invited-not-accepted users with their orgs

  Background:                                                         # features/admin/user_reports/fix_associations.feature:6
    Given the following users are registered:                         # features/step_definitions/factory_steps.rb:15
      | email           | password      | admin | confirmed_at        | organisation    | pending_organisation |
      | admin@myorg.com | adminpass0987 | true  | 2008-01-01 00:00:00 | My Organisation |                      |
    Given the following organisations exist:                          # features/step_definitions/factory_steps.rb:8
      | name       | address        | email                  |
      | normal     | 83 pinner road | admin@org.org          |
      | upcased    | 84 pinner road | UPCASED@org.org        |
      | whitespace | 30 pinner road | whitespace@charity.org |
    And "whitespace" has a whitespace at the end of the email address # features/step_definitions/basic_steps.rb:434
    And the admin invited a user for "normal"                         # features/step_definitions/organisation_reports/without_users_steps.rb:19
    And the admin invited a user for "upcased"                        # features/step_definitions/organisation_reports/without_users_steps.rb:19
    And the admin invited a user for "whitespace"                     # features/step_definitions/organisation_reports/without_users_steps.rb:19
    And associations are destroyed for:                               # features/step_definitions/basic_steps.rb:440
      | name       |
      | normal     |
      | upcased    |
      | whitespace |

  # check if the records are in the broken state
  Scenario: Broken invites as seen on the orphans page                # features/admin/user_reports/fix_associations.feature:26
    Given cookies are approved                                        # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as an admin                                  # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page                  # features/step_definitions/navigation_steps.rb:28
    Then I should not see "normal"                                    # features/step_definitions/basic_steps.rb:271
    Then I should see "upcased"                                       # features/step_definitions/basic_steps.rb:271
    Then I should see "whitespace"                                    # features/step_definitions/basic_steps.rb:271

  # None will show on the invited users page because we don't show users
  # without associations there
  Scenario: migration                                                 # features/admin/user_reports/fix_associations.feature:36
    Given I run the fix invitations rake task                         # features/step_definitions/email_steps.rb:32
    Given cookies are approved                                        # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as an admin                                  # features/step_definitions/authentication_steps.rb:12
    And I visit the organisations without users page                  # features/step_definitions/navigation_steps.rb:28
    Then I should not see "normal"                                    # features/step_definitions/basic_steps.rb:271
    Then I should not see "upcased"                                   # features/step_definitions/basic_steps.rb:271
    Then I should not see "whitespace"                                # features/step_definitions/basic_steps.rb:271
    And I visit the invited users page                                # features/step_definitions/navigation_steps.rb:28
    Then I should see "normal"                                        # features/step_definitions/basic_steps.rb:271
    Then I should see "upcased"                                       # features/step_definitions/basic_steps.rb:271
    Then I should see "whitespace"                                    # features/step_definitions/basic_steps.rb:271

Feature: Invited Users Page
  As the site owner
  So that I manage the invitation process
  I want a page that shows me who I have already invited

  Background:                                               # features/admin/user_reports/invited_users_page.feature:6
    Given the following organisations exist:                # features/step_definitions/factory_steps.rb:8
      | name                 | address        | email            |
      | Invited Organisation | 30 pinner road | invited@user.org |
    And the following users are registered:                 # features/step_definitions/factory_steps.rb:15
      | email            | password       | admin | confirmed_at        | organisation    | pending_organisation |
      | admin@myorg.com  | adminpass0987  | true  | 2008-01-01 00:00:00 | My Organisation |                      |
      | regular@user.org | mypassword1234 | false | 2008-01-01 00:00:00 |                 |                      |
    And the admin invited a user for "Invited Organisation" # features/step_definitions/organisation_reports/without_users_steps.rb:19

  Scenario: Page shows only invited users                   # features/admin/user_reports/invited_users_page.feature:16
    Given cookies are approved                              # features/step_definitions/authentication_steps.rb:90
    And I am signed in as an admin                          # features/step_definitions/authentication_steps.rb:12
    And I visit the invited users page                      # features/step_definitions/navigation_steps.rb:28
    Then I should see "invited@user.org"                    # features/step_definitions/basic_steps.rb:271
    And I should not see "regular@user.org"                 # features/step_definitions/basic_steps.rb:271

  @javascript
  Scenario: Invitations can be resent                                             # features/admin/user_reports/invited_users_page.feature:24
    Given cookies are approved                                                    # features/step_definitions/authentication_steps.rb:90
    Given I am signed in as an admin                                              # features/step_definitions/authentication_steps.rb:12
    And I visit the invited users page                                            # features/step_definitions/navigation_steps.rb:28
    And I check the box for "Invited Organisation"                                # features/step_definitions/organisation_reports/without_users_steps.rb:8
    When I click id "invite_users"                                                # features/step_definitions/navigation_steps.rb:99
    Then I should see "Invited!" in the response field for "Invited Organisation" # features/step_definitions/organisation_reports/without_users_steps.rb:1

Feature: Manage charity admins
  As a site admin
  So that users can keep their charity information up to date
  I want to manage the administrators associated with charities

  Background: organisations have been added to database # features/admin/user_reports/manage_charity_admins.feature:6
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name           | description             | address        | postcode | telephone |
      | Friendly       | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 |
      | Friendly Clone | Quite Friendly!         | 30 pinner road | HA1 4HZ  | 020800010 |
    And the following users are registered:             # features/step_definitions/factory_steps.rb:15
      | email                         | password | admin | confirmed_at         | organisation |
      | registered-user-1@example.com | pppppppp | true  | 2007-01-01  10:00:00 | Friendly     |
      | registered-user-2@example.com | pppppppp | false | 2007-01-01  10:00:00 |              |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90

  Scenario: Existing charity admin appears in form when editing charity          # features/admin/user_reports/manage_charity_admins.feature:17
    Given I am signed in as a admin                                              # features/step_definitions/authentication_steps.rb:12
    And I visit the edit page for the organisation named "Friendly"              # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/user_reports/manage_charity_admins.feature:19:in `And I visit the edit page for the organisation named "Friendly"'
    Then I should see "registered-user-1@example.com" in the charity admin email # features/step_definitions/basic_steps.rb:69

  Scenario: No admin message displayed when charity has no admins         # features/admin/user_reports/manage_charity_admins.feature:22
    Given I am signed in as a admin                                       # features/step_definitions/authentication_steps.rb:12
    And I visit the edit page for the organisation named "Friendly Clone" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/admin/user_reports/manage_charity_admins.feature:24:in `And I visit the edit page for the organisation named "Friendly Clone"'
    Then I should see the no charity admins message                       # features/step_definitions/basic_steps.rb:48

  Scenario: Cannot add non-existent user as charity admin                                                                            # features/admin/user_reports/manage_charity_admins.feature:27
    Given I am signed in as a admin                                                                                                  # features/step_definitions/authentication_steps.rb:12
    And I add "non-registered-user@example.com" as an admin for "Friendly" charity                                                   # features/step_definitions/basic_steps.rb:41
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:42:in `/^I add "(.*?)" as an admin for "(.*?)" charity$/'
      features/admin/user_reports/manage_charity_admins.feature:29:in `And I add "non-registered-user@example.com" as an admin for "Friendly" charity'
    Then I should not see "non-registered-user-1@example.com" in the charity admin email                                             # features/step_definitions/basic_steps.rb:69
    And I should see "The user email you entered,'non-registered-user@example.com', does not exist in the system" in the flash error # features/step_definitions/navigation_steps.rb:163

  Scenario: Successfully add existent user as charity admin                               # features/admin/user_reports/manage_charity_admins.feature:33
    Given I am signed in as a admin                                                       # features/step_definitions/authentication_steps.rb:12
    And I add "registered-user-2@example.com" as an admin for "Friendly" charity          # features/step_definitions/basic_steps.rb:41
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:42:in `/^I add "(.*?)" as an admin for "(.*?)" charity$/'
      features/admin/user_reports/manage_charity_admins.feature:35:in `And I add "registered-user-2@example.com" as an admin for "Friendly" charity'
    Then "registered-user-2@example.com" should be a charity admin for "Friendly" charity # features/step_definitions/basic_steps.rb:30

Feature: Approve cookies
  As the system owner
  In order to comply with the EU ePrivacy Directive
  I want all users to be given choice to approve cookie policy
  Tracker story ID: https://www.pivotaltracker.com/story/show/56438038

  Background:                                                        # features/cookie-policy.feature:7
    Given the following users are registered:                        # features/step_definitions/factory_steps.rb:15
      | email                       | password | confirmed_at        |
      | registered-user@example.com | pppppppp | 2014-01-20 16:27:36 |
    Given I receive a new password for "registered-user@example.com" # features/step_definitions/authentication_steps.rb:108
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      ./features/step_definitions/authentication_steps.rb:109:in `/^I receive a new password for "(.*?)"$/'
      features/cookie-policy.feature:11:in `Given I receive a new password for "registered-user@example.com"'
    Then I should be on the password reset page                      # features/step_definitions/navigation_steps.rb:28
    And I should see an approve cookie policy message                # features/step_definitions/cookies_steps.rb:1

  Scenario: User approving the cookies                               # features/cookie-policy.feature:15
    Given I click "Close"                                            # features/step_definitions/navigation_steps.rb:95
    Then I should not see an approve cookie policy message           # features/step_definitions/cookies_steps.rb:8
    And I should be on the password reset page                       # features/step_definitions/navigation_steps.rb:28

@allow-rescue @in-production
Feature: I want to make error pages follow the general design of the site.
  As a site administrator
  So that site users are not alarmed when I enter an incorrect URL
  I want custom error pages, rendered in-line with the rest of the site
  Pivotal Tracker story:  https://www.pivotaltracker.com/story/show/60838900

  Scenario: 404 page when visiting an invalid URL                               # features/custom_error_pages.feature:8
    When I visit "/foobar"                                                      # features/step_definitions/navigation_steps.rb:5
    And the page should be titled "404 Page Not Found"                          # features/step_definitions/navigation_steps.rb:70
    And the response status should be "404"                                     # features/step_definitions/custom_errors_steps.rb:1
    And I should see "We're sorry, but we couldn't find the page you requested" # features/step_definitions/basic_steps.rb:271

  Scenario: 404 page when opening an invalid project                            # features/custom_error_pages.feature:14
    When I visit "/organisations/foo-bar-org"                                   # features/step_definitions/navigation_steps.rb:5
    And the page should be titled "404 Page Not Found"                          # features/step_definitions/navigation_steps.rb:70
    And the response status should be "404"                                     # features/step_definitions/custom_errors_steps.rb:1
    And I should see "We're sorry, but we couldn't find the page you requested" # features/step_definitions/basic_steps.rb:271

  Scenario: 500 page                                           # features/custom_error_pages.feature:20
    When I encounter an internal server error                  # features/step_definitions/custom_errors_steps.rb:5
    Then the page should be titled "500 Internal Server Error" # features/step_definitions/navigation_steps.rb:70
    And the response status should be "500"                    # features/step_definitions/custom_errors_steps.rb:1
    And I should see "We're sorry, but something went wrong."  # features/step_definitions/basic_steps.rb:271

Feature: Disclaimer about not being able to guarantee accuracy of sites content and notice about being beta site
  As the system owner
  So that I can avoid any liability
  I want to show a link to a disclaimer on every page
  Tracker story ID: https://www.pivotaltracker.com/story/show/49757817

  Background: organisations have been added to database # features/disclaimer.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name             | address        |
      | Friendly Charity | 83 pinner road |
    Given the following pages exist:                    # features/step_definitions/factory_steps.rb:45
      | name       | permalink  | content                                                   | link_visible |
      | 404        | 404        | We're sorry, but we couldn't find the page you requested! | false        |
      | Disclaimer | disclaimer | We disclaim everything!                                   | true         |

  Scenario Outline: the disclaimer page is accessible on all pages # features/disclaimer.feature:17
    Given I visit the <page>                                       # features/step_definitions/navigation_steps.rb:28
    When I follow "Disclaimer"                                     # features/step_definitions/navigation_steps.rb:104
    Then I should see "We disclaim everything!"                    # features/step_definitions/basic_steps.rb:271

    Examples: 
      | page                                                    |
      | home page                                               |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/disclaimer.feature:18:in `Given I visit the <page>'
      | organisations index page                                |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/disclaimer.feature:18:in `Given I visit the <page>'
      | new organisation page                                   |
      | show page for the organisation named "Friendly Charity" |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/disclaimer.feature:18:in `Given I visit the <page>'

Feature: As a site administrator
  I want to be able to show all project members on a page

  Background:                               # features/display_project_contributors.feature:4
    Given the following contributors exist: # features/step_definitions/contributors_steps.rb:1
      | login  | avatar_url                    | html_url                 | contributions |
      | thomas | http://example.com/thomas.png | http://github.com/thomas | 10            |
      | john   | http://example.com/john.png   | http://github.com/john   | 10            |

  Scenario: Display project contributors      # features/display_project_contributors.feature:10
    Given I visit the home page               # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/display_project_contributors.feature:11:in `Given I visit the home page'
    And I follow the AgileVentures logo       # features/step_definitions/contributors_steps.rb:14
    Then I should be on the contributors page # features/step_definitions/navigation_steps.rb:28
    And I should see "Project Contributors"   # features/step_definitions/basic_steps.rb:271
    And I should see "thomas"                 # features/step_definitions/basic_steps.rb:271
    And I should see "john"                   # features/step_definitions/basic_steps.rb:271

  Scenario: Display avatar and links             # features/display_project_contributors.feature:18
    Given I visit the contributors page          # features/step_definitions/navigation_steps.rb:28
    Then I should see a link avatar for "thomas" # features/step_definitions/contributors_steps.rb:7
    And I should see a link avatar for "john"    # features/step_definitions/contributors_steps.rb:7

Feature: Categories of charities
  As a member of the public, or local charity worker
  In order to find a particular type of service
  I want to navigate through categories to find service
  Tracker story ID: https://www.pivotaltracker.com/story/show/46217161

  Background: organisations have been added to database # features/home_page/category.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name           | description            | address        | postcode | website       |
      | I love dogs    | loves canines          | 34 pinner road | HA1 4HZ  | http://a.com/ |
      | I love cats    | loves felines          | 64 pinner road | HA1 4HA  | http://b.com/ |
      | I hate animals | hates birds and beasts | 84 pinner road | HA1 4HF  | http://c.com/ |
    And the following categories exist:                 # features/step_definitions/factory_steps.rb:31
      | name           | charity_commission_id |
      | Animal Welfare | 101                   |
      | Health         | 102                   |
      | Education      | 103                   |
    And the following categories_organisations exist:   # features/step_definitions/factory_steps.rb:37
      | category       | organisation |
      | Animal Welfare | I love dogs  |
      | Animal Welfare | I love cats  |

  Scenario: Search for organisations in the "Animal Welfare" category # features/home_page/category.feature:25
    Given I visit the home page                                       # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/category.feature:27:in `Given I visit the home page'
    And I select the "Animal Welfare" category                        # features/step_definitions/navigation_steps.rb:1
    And I press "Submit"                                              # features/step_definitions/navigation_steps.rb:91
    Then I should see "I love dogs"                                   # features/step_definitions/basic_steps.rb:271
    And I should not see "I hate animals"                             # features/step_definitions/basic_steps.rb:271

  # TODO must ensure this also works with searching for text so we can search within a category
  Scenario: Search for dogs in the Animal Welfare category # features/home_page/category.feature:34
    Given I visit the home page                            # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/category.feature:35:in `Given I visit the home page'
    And I select the "Animal Welfare" category             # features/step_definitions/navigation_steps.rb:1
    And I search for "dogs"                                # features/step_definitions/basic_steps.rb:78
    Then I should see "I love dogs"                        # features/step_definitions/basic_steps.rb:271
    And I should not see "I love cats"                     # features/step_definitions/basic_steps.rb:271
    And I should not see "I hate animals"                  # features/step_definitions/basic_steps.rb:271

Feature: Home button in header
  As a local resident
  So that I can easily return to the home page
  I want to have a home button in the header

  Background: organisations have been added to database # features/home_page/home_button.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name                           | description                  | address        | postcode | website       |
      | Harrow Bereavement Counselling | Counselling for the bereaved | 34 pinner road | HA1 4HZ  | http://a.com/ |
      | Indian Elders Association      | Care for the elderly         | 64 pinner road | HA1 4HA  | http://b.com/ |
      | Age UK                         | Care for the Elderly         | 84 pinner road | HA1 4HF  | http://c.com/ |
    Given the following volunteer opportunities exist:  # features/step_definitions/factory_steps.rb:24
      | title              | description            | organisation |
      | Litter Box Scooper | Assist with sanitation | Age UK       |

  Scenario Outline: Find help with care for elderly         # features/home_page/home_button.feature:20
    Given I visit the <page>                                # features/step_definitions/navigation_steps.rb:28
    Then I should see an <status> home button in the header # features/step_definitions/navigation_steps.rb:181
    And I click "Home"                                      # features/step_definitions/navigation_steps.rb:95
    Then I should be on the home page                       # features/step_definitions/navigation_steps.rb:28

    Examples: 
      | page                                          | status   |
      | home page                                     | active   |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/home_button.feature:21:in `Given I visit the <page>'
      | volunteer opportunities page                  | inactive |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/index.html.erb:22:in `_app_views_volunteer_ops_index_html_erb__4421316091801771968_84448980'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/home_button.feature:21:in `Given I visit the <page>'
      | organisations index page                      | inactive |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/home_button.feature:21:in `Given I visit the <page>'
      | show page for the organisation named "Age UK" | inactive |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/home_page/home_button.feature:21:in `Given I visit the <page>'

Feature: Local Resident seeking Support
  As a local resident
  So that I can get support for a specific malady
  I want to find contact details for a local service specific to my need
  Tracker story ID: https://www.pivotaltracker.com/story/show/43946779

  Background: organisations have been added to database # features/home_page/local_resident_seeking_support.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name                           | description                  | address        | postcode | website       |
      | Harrow Bereavement Counselling | Counselling for the bereaved | 34 pinner road | HA1 4HZ  | http://a.com/ |
      | Indian Elders Association      | Care for the elderly         | 64 pinner road | HA1 4HA  | http://b.com/ |
      | Age UK                         | Care for the Elderly         | 84 pinner road | HA1 4HF  | http://c.com/ |

  # particularly want to provide visibility to organisations with no existing web presence
  Scenario: Find help with care for elderly     # features/home_page/local_resident_seeking_support.feature:16
    Given I visit the home page                 # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/local_resident_seeking_support.feature:17:in `Given I visit the home page'
    When I search for "elderly"                 # features/step_definitions/basic_steps.rb:78
    Then the index should contain:              # features/step_definitions/basic_steps.rb:421
      | Indian Elders Association | Care for the elderly |
      | Age UK                    | Care for the Elderly |
    And the index should not contain:           # features/step_definitions/basic_steps.rb:421
      | Harrow Bereavement Counselling | Counselling for the bereaved |
    And the search box should contain "elderly" # features/step_definitions/basic_steps.rb:197

  # starting within main site
  Scenario: Find a bereavement counsellor        # features/home_page/local_resident_seeking_support.feature:27
    Given I visit the home page                  # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/local_resident_seeking_support.feature:28:in `Given I visit the home page'
    When I search for "Bereavement Counselling"  # features/step_definitions/basic_steps.rb:78
    And the index should contain:                # features/step_definitions/basic_steps.rb:421
      | Harrow Bereavement Counselling | Counselling for the bereaved |
    Then the index should not contain:           # features/step_definitions/basic_steps.rb:421
      | Indian Elders Association | Care for the elderly |
      | Age UK                    | Care for the Elderly |
    Then I should not see the no results message # features/step_definitions/basic_steps.rb:201

  Scenario: Find friendly no search results message # features/home_page/local_resident_seeking_support.feature:37
    Given I visit the home page                     # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/local_resident_seeking_support.feature:38:in `Given I visit the home page'
    When I search for "non-existent results"        # features/step_definitions/basic_steps.rb:78
    Then I should see the no results message        # features/step_definitions/basic_steps.rb:201
    Given I visit the home page                     # features/step_definitions/navigation_steps.rb:28
    Then I should not see the no results message    # features/step_definitions/basic_steps.rb:201

  Scenario: See a list of current organisations # features/home_page/local_resident_seeking_support.feature:44
    Given I visit the home page                 # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/local_resident_seeking_support.feature:45:in `Given I visit the home page'
    And cookies are approved                    # features/step_definitions/authentication_steps.rb:90
    Then the index should contain:              # features/step_definitions/basic_steps.rb:421
      | Harrow Bereavement Counselling | Counselling for the bereaved |
      | Indian Elders Association      | Care for the elderly         |
      | Age UK                         | Care for the Elderly         |

Feature: Map of local charities
  As a local resident
  So that I can get support for a specific condition
  I want to find contact details for a local service specific to my need
  Tracker story ID: https://www.pivotaltracker.com/story/show/45757075
  Tracker story ID: https://www.pivotaltracker.com/story/show/52317013

  Background:                                 # features/home_page/map.feature:8
    Given the following organisations exist:  # features/step_definitions/factory_steps.rb:8
      | name                           | description                    | address        | postcode | website       |
      | Harrow Bereavement Counselling | Harrow Bereavement Counselling | 34 pinner road | HA1 4HZ  | http://a.com/ |
      | Indian Elders Association      | Care for the elderly           | 64 pinner road | HA1 4HA  | http://b.com/ |
      | Age UK                         | Care for the Elderly           | 84 pinner road | HA1 4HF  | http://c.com/ |
      | Youth UK                       | Care for the Very Young        | 84 pinner road | HA1 4HF  | http://d.com/ |
    Given the following users are registered: # features/step_definitions/factory_steps.rb:15
      | email                         | password | organisation | confirmed_at         |
      | registered_user-3@example.com | pppppppp | Youth UK     | 2007-01-01  10:00:00 |

  @javascript
  Scenario: Show all charities in map on homepage map          # features/home_page/map.feature:21
    Given I visit the home page                                # features/step_definitions/navigation_steps.rb:28
    Then I should see the following measle markers in the map: # features/step_definitions/map_steps.rb:32
      | Indian Elders Association | Age UK | Harrow Bereavement Counselling |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:23:in `Then I should see the following measle markers in the map:'

  @javascript
  Scenario: Infowindow appears when clicking on map marker           # features/home_page/map.feature:27
    Given I visit the home page                                      # features/step_definitions/navigation_steps.rb:28
    Then I should see an infowindow when I click on the map markers: # features/step_definitions/map_steps.rb:1
      | Indian Elders Association | Age UK | Harrow Bereavement Counselling |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:29:in `Then I should see an infowindow when I click on the map markers:'

  @time_travel @javascript
  Scenario Outline: Organisation map has small icon for organisations updated more than 365 days ago # features/home_page/map.feature:33
    Given I travel "<days>" days into the future                                                     # features/step_definitions/basic_steps.rb:5
    And I visit the home page                                                                        # features/step_definitions/navigation_steps.rb:28
    Then the organisation "Youth UK" should have a <size> icon                                       # features/step_definitions/map_steps.rb:22

    Examples: 
      | days | size  |
      | 2    | large |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:36:in `Then the organisation "Youth UK" should have a <size> icon'
      | 100  | large |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:36:in `Then the organisation "Youth UK" should have a <size> icon'
      | 200  | large |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:36:in `Then the organisation "Youth UK" should have a <size> icon'
      | 364  | large |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:36:in `Then the organisation "Youth UK" should have a <size> icon'
      | 365  | small |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:36:in `Then the organisation "Youth UK" should have a <size> icon'
      | 366  | small |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:36:in `Then the organisation "Youth UK" should have a <size> icon'
      | 500  | small |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:36:in `Then the organisation "Youth UK" should have a <size> icon'

  @javascript
  Scenario: Organisation map has small icon for organisation with no users     # features/home_page/map.feature:48
    Given I visit the home page                                                # features/step_definitions/navigation_steps.rb:28
    Then the organisation "Indian Elders Association" should have a small icon # features/step_definitions/map_steps.rb:22
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/home_page/map.feature:50:in `Then the organisation "Indian Elders Association" should have a small icon'

  Scenario: Changing address on the map changes the map coordinates                                 # features/home_page/map.feature:52
    Given I visit the home page                                                                     # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/map.feature:53:in `Given I visit the home page'
    Then the coordinates for "Harrow Bereavement Counselling" and "Youth UK" should not be the same # features/step_definitions/map_steps.rb:62
    And the coordinates for "Age UK" and "Youth UK" should be the same                              # features/step_definitions/map_steps.rb:62
    Given cookies are approved                                                                      # features/step_definitions/authentication_steps.rb:90
    When I am signed in as a charity worker related to "Youth UK"                                   # features/step_definitions/authentication_steps.rb:1
    And I update "Youth UK" charity address to be "34 pinner road"                                  # features/step_definitions/basic_steps.rb:111
    And I visit the home page                                                                       # features/step_definitions/navigation_steps.rb:28
    Then the coordinates for "Harrow Bereavement Counselling" and "Youth UK" should be the same     # features/step_definitions/map_steps.rb:62
    Then the coordinates for "Age UK" and "Youth UK" should not be the same                         # features/step_definitions/map_steps.rb:62

Feature: Order organisations by most recently updated
  As any user
  So that I can see which charities have been updated most recently
  I want to be able to sort charities by update time
  TTracker story ID: https://www.pivotaltracker.com/story/show/50082619

  Background: organisations have been added to database # features/home_page/sort_charities_by_update_time.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name                           | updated_at            | address        |
      | Harrow Bereavement Counselling | "2013-01-23 15:54:34" | 34 pinner road |
      | Harrow Elders Association      | "2013-02-23 15:54:34" | 64 pinner road |
      | Harrow Age UK                  | "2013-03-23 15:54:34" | 84 pinner road |

  Scenario: Most recently updated charity shows at the top of the list       # features/home_page/sort_charities_by_update_time.feature:15
    Given I update the "Harrow Elders Association"                           # features/step_definitions/basic_steps.rb:215
    And I visit the home page                                                # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/sort_charities_by_update_time.feature:17:in `And I visit the home page'
    Then I should see "Harrow Elders Association" before "Harrow Age UK"     # features/step_definitions/basic_steps.rb:182
    And I should see "Harrow Age UK" before "Harrow Bereavement Counselling" # features/step_definitions/basic_steps.rb:182

  Scenario: Most recently updated charity shows at the top of the list                    # features/home_page/sort_charities_by_update_time.feature:21
    Given I visit the home page                                                           # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/home_page/sort_charities_by_update_time.feature:22:in `Given I visit the home page'
    Then I should see "Harrow Elders Association" before "Harrow Bereavement Counselling" # features/step_definitions/basic_steps.rb:182
    And I should see "Harrow Age UK" before "Harrow Elders Association"                   # features/step_definitions/basic_steps.rb:182
    When I update the "Harrow Elders Association"                                         # features/step_definitions/basic_steps.rb:215
    And I search for "Harrow"                                                             # features/step_definitions/basic_steps.rb:78
    And I visit the home page                                                             # features/step_definitions/navigation_steps.rb:28
    Then I should see "Harrow Elders Association" before "Harrow Bereavement Counselling" # features/step_definitions/basic_steps.rb:182

Feature: Web page owned by each charity
  As a charity worker
  So that I can increase my charity's visibility
  I want to have a web presence
  Tracker story ID: https://www.pivotaltracker.com/story/show/45405153

  Background: organisations have been added to database             # features/individual_charity_pages/charity_page.feature:7
    Given the following organisations exist:                        # features/step_definitions/factory_steps.rb:8
      | name       | description             | address        | postcode | telephone | website             | email             |
      | Friendly   | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 | http://friendly.org | admin@friendly.xx |
      | Unfriendly | Bunch of jerks          | 30 pinner road |          | 020800010 |                     |                   |
    Given the following users are registered:                       # features/step_definitions/factory_steps.rb:15
      | email                         | password | organisation | confirmed_at         |
      | registered_user-1@example.com | pppppppp | Friendly     | 2007-01-01  10:00:00 |
      | registered_user-2@example.com | pppppppp |              | 2007-01-01  10:00:00 |
    And I visit the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/charity_page.feature:17:in `And I visit the show page for the organisation named "Friendly"'
    Given the following categories exist:                           # features/step_definitions/factory_steps.rb:31
      | name           | charity_commission_id |
      | Animal Welfare | 101                   |
      | Health         | 102                   |
      | Education      | 103                   |
    Given the following categories_organisations exist:             # features/step_definitions/factory_steps.rb:37
      | category  | organisation |
      | Health    | Friendly     |
      | Education | Friendly     |
    And I visit the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55

  Scenario: be able to view link to charity site on individual charity page # features/individual_charity_pages/charity_page.feature:31
    Then I should see the external website link for "Friendly" charity      # features/step_definitions/basic_steps.rb:240

  Scenario: display charity title in a visible way                  # features/individual_charity_pages/charity_page.feature:34
    Then I should see "Friendly" < tagged > with "h3"               # features/step_definitions/basic_steps.rb:355

  Scenario: show organisation e-mail as link                        # features/individual_charity_pages/charity_page.feature:37
    Then I should see a mail-link to "admin@friendly.xx"            # features/step_definitions/basic_steps.rb:365

  Scenario: show categories of charity                                # features/individual_charity_pages/charity_page.feature:40
    Then I should see "Health"                                        # features/step_definitions/basic_steps.rb:271
    And I should see "Education"                                      # features/step_definitions/basic_steps.rb:271
    And I should not see "Animal Welfare"                             # features/step_definitions/basic_steps.rb:271
    And I visit the show page for the organisation named "Unfriendly" # features/step_definitions/navigation_steps.rb:55
    Then I should not see "Health"                                    # features/step_definitions/basic_steps.rb:271
    And I should not see "Education"                                  # features/step_definitions/basic_steps.rb:271
    And I should not see "Animal Welfare"                             # features/step_definitions/basic_steps.rb:271

  Scenario Outline: show labels if field is present # features/individual_charity_pages/charity_page.feature:49
    Then I should see "<label>"                     # features/step_definitions/basic_steps.rb:271

    Examples: 
      | label    |
      | Postcode |
      | Email    |
      | Website  |

  Scenario Outline: hide labels if field is empty                       # features/individual_charity_pages/charity_page.feature:57
    Given I visit the show page for the organisation named "Unfriendly" # features/step_definitions/navigation_steps.rb:55
    Then I should not see "<label>"                                     # features/step_definitions/basic_steps.rb:271

    Examples: 
      | label    |
      | Postcode |
      | Email    |
      | Website  |

Feature: Local Resident looking to donate
  As a local resident
  So that I can help local charities
  I want to find out how I can donate
  Tracker story ID: https://www.pivotaltracker.com/story/show/45392735

  Background: organisations have been added to database # features/individual_charity_pages/donation_info.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name   | donation_info           | address        |
      | Age UK | www.age-uk.co.uk/donate | 84 pinner road |

  Scenario: Org page of an organisation with donation info URL      # features/individual_charity_pages/donation_info.feature:13
    Given I visit the show page for the organisation named "Age UK" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/donation_info.feature:14:in `Given I visit the show page for the organisation named "Age UK"'
    Then I should see the donation_info URL for "Age UK"            # features/step_definitions/basic_steps.rb:187

Feature: Edit donation information feature
  As a charity worker
  So that I can attract funding
  I want to encourage local people to donate
  (charity worker can update a link to where they accept donations)
  
  Tracker story: https://www.pivotaltracker.com/s/projects/742821/stories/45405077

  Background: organisations have been added to database # features/individual_charity_pages/edit_donation_info.feature:9
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 |
    Given the following users are registered:           # features/step_definitions/factory_steps.rb:15
      | email                        | password | admin | organisation | confirmed_at         |
      | registered_user@example.com  | pppppppp | false | Friendly     | 2007-01-01  10:00:00 |
      | registered_user2@example.com | pppppppp | false |              | 2007-01-01  10:00:00 |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90

  Scenario: Successfully change the donation url for a charity                                # features/individual_charity_pages/edit_donation_info.feature:20
    Given I visit the home page                                                               # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/individual_charity_pages/edit_donation_info.feature:30:in `Given I visit the home page'
    And I sign in as "registered_user@example.com" with password "pppppppp"                   # features/step_definitions/authentication_steps.rb:64
    Given I visit the edit page for the organisation named "Friendly"                         # features/step_definitions/navigation_steps.rb:55
    And I edit the donation url to be "http://www.friendly.com/donate"                        # features/step_definitions/basic_steps.rb:227
    And I press "Update Organisation"                                                         # features/step_definitions/navigation_steps.rb:91
    Then I should be on the show page for the organisation named "Friendly"                   # features/step_definitions/navigation_steps.rb:55
    And I should see "Organisation was successfully updated"                                  # features/step_definitions/basic_steps.rb:271
    And the donation_info URL for "Friendly" should refer to "http://www.friendly.com/donate" # features/step_definitions/basic_steps.rb:193

Feature: Tool tip instructions for fields on edit form
  As a charity owner
  So that I can fill out the edit form correctly
  I want to be able to have detailed tool tip instructions for edit form
  
  Tracker story ID: https://www.pivotaltracker.com/story/show/55198634

  Background:                                 # features/individual_charity_pages/edit_form_tooltips.feature:8
    Given the following organisations exist:  # features/step_definitions/factory_steps.rb:8
      | name                           | description                    | address        | postcode | website       |
      | Harrow Bereavement Counselling | Harrow Bereavement Counselling | 34 pinner road | HA1 4HZ  | http://a.com/ |
    Given the following users are registered: # features/step_definitions/factory_steps.rb:15
      | email                         | password | organisation                   | confirmed_at         |
      | registered_user-3@example.com | pppppppp | Harrow Bereavement Counselling | 2007-01-01  10:00:00 |
    And cookies are approved                  # features/step_definitions/authentication_steps.rb:90

  Scenario: Display tooltip for each field on the edit form                               # features/individual_charity_pages/edit_form_tooltips.feature:18
    Given I am signed in as a charity worker related to "Harrow Bereavement Counselling"  # features/step_definitions/authentication_steps.rb:1
    And I visit the edit page for the organisation named "Harrow Bereavement Counselling" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_form_tooltips.feature:20:in `And I visit the edit page for the organisation named "Harrow Bereavement Counselling"'
    Then the following tooltips should exist:                                             # features/step_definitions/tooltip_steps.rb:1
      | label                                              | tooltip                                                                                                                                                                       |
      | Address                                            | Enter a complete address                                                                                                                                                      |
      | Add an additional organisation administrator email | Please enter the details of individuals from your organisation you would like to give permission to update your entry. E-mail addresses entered here will not be made public. |
      | Name                                               | Enter a unique name                                                                                                                                                           |
      | Postcode                                           | Make sure post code is accurate                                                                                                                                               |
      | Email                                              | Make sure email is correct                                                                                                                                                    |
      | Description                                        | Enter a full description here. When an individual searches this database all words in this description will be searched.                                                      |
      | Website                                            | Make sure url is correct                                                                                                                                                      |
      | Telephone                                          | Make sure phone number is correct                                                                                                                                             |
      | Donation                                           | Please enter a website here either to the fundraising page on your website or to an online donation site.                                                                     |

  Scenario: Display tooltip for each checkbox on the edit form                            # features/individual_charity_pages/edit_form_tooltips.feature:33
    Given I am signed in as a charity worker related to "Harrow Bereavement Counselling"  # features/step_definitions/authentication_steps.rb:1
    And I visit the edit page for the organisation named "Harrow Bereavement Counselling" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_form_tooltips.feature:35:in `And I visit the edit page for the organisation named "Harrow Bereavement Counselling"'
    Then the following tooltips should exist:                                             # features/step_definitions/tooltip_steps.rb:1
      | label     | tooltip                                                  |
      | Email     | Toggle to change the visibility of your email address    |
      | Address   | Toggle to change the visibility of your telephone number |
      | Telephone | Toggle to change the visibility of your address          |

Feature: Charity worker can edit own charity profile
  As a charity worker
  So that I can increase my charity's visibility
  I want to edit my charity's web page (description and contact details)
  Tracker story ID: https://www.pivotaltracker.com/story/show/45671099

  #address of nice must be 30 pinner road because of change the address of charity scenario
  #need to revisit this
  Background: organisations have been added to database # features/individual_charity_pages/edit_own_charity_profile.feature:9
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone | email              |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 | admin@friendly.org |
      | Nice     | Quite Pleasant!         | 30 pinner road | HA1 4HZ  | 020800010 | admin@nice.org     |
    Given the following users are registered:           # features/step_definitions/factory_steps.rb:15
      | email                         | password | organisation | confirmed_at         |
      | registered_user-2@example.com | pppppppp | Friendly     | 2007-01-01  10:00:00 |
      | registered_user-1@example.com | pppppppp |              | 2007-01-01  10:00:00 |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90
    Given the following categories exist:               # features/step_definitions/factory_steps.rb:31
      | name              | charity_commission_id |
      | Animal welfare    | 101                   |
      | Child welfare     | 102                   |
      | Feed the hungry   | 103                   |
      | Accommodation     | 203                   |
      | General           | 204                   |
      | Health            | 202                   |
      | Education         | 303                   |
      | Give them things  | 304                   |
      | Teach them things | 305                   |
    Given the following categories_organisations exist: # features/step_definitions/factory_steps.rb:37
      | category  | organisation |
      | Health    | Friendly     |
      | Education | Friendly     |

  Scenario: Successfully add website url without protocol            # features/individual_charity_pages/edit_own_charity_profile.feature:37
    Given I am signed in as a charity worker related to "Friendly"   # features/step_definitions/authentication_steps.rb:1
    And I update "Friendly" charity website to be "www.friendly.com" # features/step_definitions/basic_steps.rb:129
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:130:in `/^I update "(.*?)" charity website to be "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:39:in `And I update "Friendly" charity website to be "www.friendly.com"'
    Then the website link for "Friendly" should have a protocol      # features/step_definitions/basic_steps.rb:168

  Scenario: Successfully change the address of a charity                    # features/individual_charity_pages/edit_own_charity_profile.feature:42
    Given I am signed in as a charity worker related to "Friendly"          # features/step_definitions/authentication_steps.rb:1
    And I update "Friendly" charity address to be "30 pinner road"          # features/step_definitions/basic_steps.rb:111
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:112:in `/^I update "(.*?)" charity address to be "(.*?)"( when Google is indisposed)?$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:44:in `And I update "Friendly" charity address to be "30 pinner road"'
    Then I should be on the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55

  Scenario Outline: Successfully mark a field of a charity as public or private # features/individual_charity_pages/edit_own_charity_profile.feature:47
    Given I am signed in as a charity worker related to "Friendly"              # features/step_definitions/authentication_steps.rb:1
    And I visit the edit page for the organisation named "Friendly"             # features/step_definitions/navigation_steps.rb:55
    And the <field> for "Friendly" has been marked hidden                       # features/step_definitions/basic_steps.rb:407
    And I <check_state> "<field_checkbox>"                                      # features/step_definitions/basic_steps.rb:402
    And I press "Update Organisation"                                           # features/step_definitions/navigation_steps.rb:91
    Then I should be on the show page for the organisation named "Friendly"     # features/step_definitions/navigation_steps.rb:55
    And I should <visibility> "<field_contents>"                                # features/step_definitions/basic_steps.rb:271
    And I should <visibility> "<field_label>"                                   # features/step_definitions/basic_steps.rb:271

    Examples: 
      | field   | field_checkbox               | field_contents     | field_label | check_state | visibility |
      | phone   | organisation_publish_phone   | 020800000          | Telephone   | check       | see        |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:49:in `And I visit the edit page for the organisation named "Friendly"'
      | address | organisation_publish_address | 34 pinner road     | Address     | check       | see        |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:49:in `And I visit the edit page for the organisation named "Friendly"'
      | email   | organisation_publish_email   | admin@friendly.org | Email       | check       | see        |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:49:in `And I visit the edit page for the organisation named "Friendly"'
      | phone   | organisation_publish_phone   | 020800000          | Telephone   | uncheck     | not see    |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:49:in `And I visit the edit page for the organisation named "Friendly"'
      | address | organisation_publish_address | 34 pinner road     | Address     | uncheck     | not see    |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:49:in `And I visit the edit page for the organisation named "Friendly"'
      | email   | organisation_publish_email   | admin@friendly.org | Email       | uncheck     | not see    |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:49:in `And I visit the edit page for the organisation named "Friendly"'

  #TODO refactor into integration test that posts to update method
  #Scenario: Unsuccessfully change the address of a charity
  #  Given I am signed in as a charity worker unrelated to "Friendly"
  #  Given I furtively update "Friendly" charity address to be "30 pinner road"
  #  Then I should see "You don't have permission"
  #  And I should be on the charity page for "Friendly"
  #  Given I visit the home page
  #  Then the coordinates for "Nice" and "Friendly" should not be the same
  Scenario: Do not see edit button as non-admin not associated with Friendly # features/individual_charity_pages/edit_own_charity_profile.feature:75
    Given I am signed in as a charity worker unrelated to "Friendly"         # features/step_definitions/authentication_steps.rb:1
    And I visit the show page for the organisation named "Friendly"          # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:77:in `And I visit the show page for the organisation named "Friendly"'
    Then I should not see an edit button for "Friendly" charity              # features/step_definitions/basic_steps.rb:57

  Scenario: Non-logged in users do not see edit button either         # features/individual_charity_pages/edit_own_charity_profile.feature:80
    Given I visit the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:81:in `Given I visit the show page for the organisation named "Friendly"'
    Then I should not see an edit button for "Friendly" charity       # features/step_definitions/basic_steps.rb:57

  Scenario: Change the address of a charity when Google is indisposed                        # features/individual_charity_pages/edit_own_charity_profile.feature:84
    Given I am signed in as a charity worker related to "Friendly"                           # features/step_definitions/authentication_steps.rb:1
    And I update "Friendly" charity address to be "83 pinner road" when Google is indisposed # features/step_definitions/basic_steps.rb:111
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:112:in `/^I update "(.*?)" charity address to be "(.*?)"( when Google is indisposed)?$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:86:in `And I update "Friendly" charity address to be "83 pinner road" when Google is indisposed'
    Then I should not see the unable to save organisation error                              # features/step_definitions/basic_steps.rb:295
    Then the address for "Friendly" should be "83 pinner road"                               # features/step_definitions/basic_steps.rb:299
    And I visit the show page for the organisation named "Friendly"                          # features/step_definitions/navigation_steps.rb:55

  #  TODO possible follow on if we could have the request re-issued on next page load
  #  Given Google is no longer indisposed
  #  And I visit the home page
  #  Then the coordinates for "Friendly" should be correct
  #  Then show me the page
  Scenario: Redirected to sign-in when not signed-in and edit donation url # features/individual_charity_pages/edit_own_charity_profile.feature:97
    Given I visit the edit page for the organisation named "Friendly"      # features/step_definitions/navigation_steps.rb:55
    Then I should be on the sign in page                                   # features/step_definitions/navigation_steps.rb:28

  # TODO after sign in is take the user back to the edit page
  Scenario: By default, not display organisations address and phone number on home page  # features/individual_charity_pages/edit_own_charity_profile.feature:102
    Given I visit the show page for the organisation named "Friendly"                    # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:103:in `Given I visit the show page for the organisation named "Friendly"'
    Then I should not see any address or telephone information for "Nice" and "Friendly" # features/step_definitions/basic_steps.rb:206

  Scenario: By default, not display organisations edit and delete on home page # features/individual_charity_pages/edit_own_charity_profile.feature:106
    Given I visit the show page for the organisation named "Friendly"          # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:107:in `Given I visit the show page for the organisation named "Friendly"'
    Then I should not see any edit or delete links                             # features/step_definitions/basic_steps.rb:231

  Scenario: By default, not display organisations address and phone number on details page # features/individual_charity_pages/edit_own_charity_profile.feature:110
    Given I visit the show page for the organisation named "Friendly"                      # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:111:in `Given I visit the show page for the organisation named "Friendly"'
    Then I should not see any address or telephone information for "Friendly"              # features/step_definitions/basic_steps.rb:221

  Scenario: By default, not display edit link on details page         # features/individual_charity_pages/edit_own_charity_profile.feature:114
    Given I visit the show page for the organisation named "Friendly" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:115:in `Given I visit the show page for the organisation named "Friendly"'
    Then I should not see any edit link for "Friendly"                # features/step_definitions/basic_steps.rb:236

  Scenario Outline: Edit page has scroll box for selecting categories                       # features/individual_charity_pages/edit_own_charity_profile.feature:118
    Given I am signed in as a charity worker related to "Friendly"                          # features/step_definitions/authentication_steps.rb:1
    And I visit the edit page for the organisation named "Friendly"                         # features/step_definitions/navigation_steps.rb:55
    Then I should see the category named <category_name> as the <nth> category in <heading> # features/step_definitions/category_steps.rb:1

    Examples: 
      | heading      | category_name     | nth |
      | What you do  | Animal welfare    | 1st |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | What you do  | Child welfare     | 2nd |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | What you do  | Feed the hungry   | 3rd |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | Who you help | Accommodation     | 1st |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | Who you help | General           | 2nd |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | Who you help | Health            | 3rd |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | How you help | Education         | 1st |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | How you help | Give them things  | 2nd |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'
      | How you help | Teach them things | 3rd |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:120:in `And I visit the edit page for the organisation named "Friendly"'

  Scenario Outline: Appropriate categories are checked/unchecked by default # features/individual_charity_pages/edit_own_charity_profile.feature:134
    Given I am signed in as a charity worker related to "Friendly"          # features/step_definitions/authentication_steps.rb:1
    And I visit the edit page for the organisation named "Friendly"         # features/step_definitions/navigation_steps.rb:55
    Then the category named <category> should be <status>                   # features/step_definitions/category_steps.rb:5

    Examples: 
      | category          | status    |
      | Health            | checked   |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | Education         | checked   |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | Animal welfare    | unchecked |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | Child welfare     | unchecked |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | Feed the hungry   | unchecked |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | Accommodation     | unchecked |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | General           | unchecked |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | Teach them things | unchecked |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'
      | Give them things  | unchecked |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:136:in `And I visit the edit page for the organisation named "Friendly"'

  Scenario Outline: Successfully add and remove an organisation's categories # features/individual_charity_pages/edit_own_charity_profile.feature:150
    Given I am signed in as a charity worker related to "Friendly"           # features/step_definitions/authentication_steps.rb:1
    And I visit the edit page for the organisation named "Friendly"          # features/step_definitions/navigation_steps.rb:55
    Then I <action1> the category "<category1>"                              # features/step_definitions/category_steps.rb:15
    And I <action2> the category "<category2>"                               # features/step_definitions/category_steps.rb:10
    And I press "Update Organisation"                                        # features/step_definitions/navigation_steps.rb:91
    Then I should <visibility1> "<category1>"                                # features/step_definitions/basic_steps.rb:271
    And I should <visibility2> "<category2>"                                 # features/step_definitions/basic_steps.rb:271

    Examples: 
      | category1      | action1 | visibility1 | category2        | action2 | visibility2 |
      | Health         | uncheck | not see     | Child welfare    | check   | see         |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:152:in `And I visit the edit page for the organisation named "Friendly"'
      | Animal welfare | check   | see         | Education        | uncheck | not see     |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:152:in `And I visit the edit page for the organisation named "Friendly"'
      | Health         | uncheck | not see     | Education        | uncheck | not see     |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:152:in `And I visit the edit page for the organisation named "Friendly"'
      | General        | check   | see         | Give them things | check   | see         |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/_form.html.erb:113:in `_app_views_organisations__form_html_erb___4586152882113953015_76837360'
      ./app/views/organisations/edit.html.erb:1:in `_app_views_organisations_edit_html_erb___2612000050253023676_76830960'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/edit_own_charity_profile.feature:152:in `And I visit the edit page for the organisation named "Friendly"'

Feature: Charity worker is reminded annually to edit own charity profile
  As a charity worker
  So that I remember to update my details
  I want to be reminded annually to update my details
  Tracker story ID: https://www.pivotaltracker.com/story/show/65363894

  Background: organisations have been added to database # features/individual_charity_pages/remind_charity_admin_to_update_page.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone | email              |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 | admin@friendly.org |
    Given the following users are registered:           # features/step_definitions/factory_steps.rb:15
      | email              | password | organisation | confirmed_at         |
      | admin@friendly.org | pppppppp | Friendly     | 2007-01-01  10:00:00 |
    And cookies are approved                            # features/step_definitions/authentication_steps.rb:90

  @javascript @time_travel
  Scenario: Org owner is reminded to update details after a year                    # features/individual_charity_pages/remind_charity_admin_to_update_page.feature:19
    Given I travel "365" days into the future                                       # features/step_definitions/basic_steps.rb:5
    And I visit the home page                                                       # features/step_definitions/navigation_steps.rb:28
    And I click "Login"                                                             # features/step_definitions/navigation_steps.rb:95
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/individual_charity_pages/remind_charity_admin_to_update_page.feature:22:in `And I click "Login"'
    When I sign in as "admin@friendly.org" with password "pppppppp" with javascript # features/step_definitions/authentication_steps.rb:64
    Then I should see the call to update details for organisation "Friendly"        # features/step_definitions/navigation_steps.rb:171

  @javascript @time_travel
  Scenario: Org owner is not reminded to update details prior to a year             # features/individual_charity_pages/remind_charity_admin_to_update_page.feature:27
    Given I travel "364" days into the future                                       # features/step_definitions/basic_steps.rb:5
    And I visit the home page                                                       # features/step_definitions/navigation_steps.rb:28
    And I click "Login"                                                             # features/step_definitions/navigation_steps.rb:95
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      features/individual_charity_pages/remind_charity_admin_to_update_page.feature:30:in `And I click "Login"'
    When I sign in as "admin@friendly.org" with password "pppppppp" with javascript # features/step_definitions/authentication_steps.rb:64
    Then I should not see the call to update details for organisation "Friendly"    # features/step_definitions/navigation_steps.rb:171

Feature: This is my organisation
  As an organisation administrator
  So that I could be set as an admin of our organisation (to edit details, post volunteer ops)
  I want to be able to request for the privilege through our organisation page

  Background:                                # features/individual_charity_pages/this-is-my-org.feature:6
    Given the following organisations exist: # features/step_definitions/factory_steps.rb:8
      | name         | address        |
      | Helpful Folk | 83 pinner road |
      | The Other    | 83 pinner road |
    And the following users are registered:  # features/step_definitions/factory_steps.rb:15
      | email                     | password       | admin | confirmed_at        | organisation | pending_organisation |
      | admin@helpfolk.com        | mypassword1234 | false | 2008-01-01 00:00:00 |              |                      |
      | pendingadmin@helpfolk.com | mypassword1234 | false | 2008-01-01 00:00;00 |              | Helpful Folk         |
      | admin@localsupport.org    | mypassword1234 | true  | 2008-01-01 00:00:00 |              |                      |
    And cookies are approved                 # features/step_definitions/authentication_steps.rb:90

  Scenario: Signed in User                                                                                                    # features/individual_charity_pages/this-is-my-org.feature:20
    Given I am signed in as a non-admin                                                                                       # features/step_definitions/authentication_steps.rb:12
    And I click "This is my organisation" on the "Helpful Folk" page and stay there                                           # features/step_definitions/basic_steps.rb:323
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      ./features/step_definitions/basic_steps.rb:324:in `/^I click "(.*)" on the "(.*)" page and stay there$/'
      features/individual_charity_pages/this-is-my-org.feature:22:in `And I click "This is my organisation" on the "Helpful Folk" page and stay there'
    Then I should see "You have requested admin status for Helpful Folk"                                                      # features/step_definitions/basic_steps.rb:271
    And I should not see a link or button "This is my organisation"                                                           # features/step_definitions/basic_steps.rb:276
    And "admin@helpfolk.com"'s request for "Helpful Folk" should be persisted                                                 # features/step_definitions/basic_steps.rb:340
    And an email should be sent to "admin@localsupport.org" as notification of the request for admin status of "Helpful Folk" # features/step_definitions/email_steps.rb:1

  # when capybara-webkit clicks TIMO, it needs to submit sign in form with javascript or
  # else ClickFailed error will occur due to overlapping elements
  @javascript
  Scenario: Not Signed in User                                                                                                # features/individual_charity_pages/this-is-my-org.feature:31
    Given I click "This is my organisation" on the "Helpful Folk" page and stay there                                         # features/step_definitions/basic_steps.rb:323
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      features/individual_charity_pages/this-is-my-org.feature:32:in `Given I click "This is my organisation" on the "Helpful Folk" page and stay there'
    When I sign in as "admin@helpfolk.com" with password "mypassword1234" with javascript                                     # features/step_definitions/authentication_steps.rb:64
    Then I should see "You have requested admin status for Helpful Folk"                                                      # features/step_definitions/basic_steps.rb:271
    And I should not see a link or button "This is my organisation"                                                           # features/step_definitions/basic_steps.rb:276
    And "admin@helpfolk.com"'s request for "Helpful Folk" should be persisted                                                 # features/step_definitions/basic_steps.rb:340
    And an email should be sent to "admin@localsupport.org" as notification of the request for admin status of "Helpful Folk" # features/step_definitions/email_steps.rb:1

  # what we're not checking here is that the login box pops open with the right message
  # I think we cover that in jasmine tests - needed here too?
  @javascript
  Scenario: Not Signed in User Who Fails Signin Once                                                                          # features/individual_charity_pages/this-is-my-org.feature:42
    Given I click "This is my organisation" on the "Helpful Folk" page and stay there                                         # features/step_definitions/basic_steps.rb:323
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      features/individual_charity_pages/this-is-my-org.feature:43:in `Given I click "This is my organisation" on the "Helpful Folk" page and stay there'
    When I sign in as "admin@helpfolk.com" with password "mypassword1235" with javascript                                     # features/step_definitions/authentication_steps.rb:64
    Then I should be on the sign in page                                                                                      # features/step_definitions/navigation_steps.rb:28
    When I sign in as "admin@helpfolk.com" with password "mypassword1234"                                                     # features/step_definitions/authentication_steps.rb:64
    Then I should see "You have requested admin status for Helpful Folk"                                                      # features/step_definitions/basic_steps.rb:271
    And I should not see a link or button "This is my organisation"                                                           # features/step_definitions/basic_steps.rb:276
    And "admin@helpfolk.com"'s request for "Helpful Folk" should be persisted                                                 # features/step_definitions/basic_steps.rb:340
    And an email should be sent to "admin@localsupport.org" as notification of the request for admin status of "Helpful Folk" # features/step_definitions/email_steps.rb:1

  @javascript
  Scenario: Unregistered User                                                                                                                  # features/individual_charity_pages/this-is-my-org.feature:53
    Given I click "This is my organisation" on the "Helpful Folk" page and stay there                                                          # features/step_definitions/basic_steps.rb:323
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      features/individual_charity_pages/this-is-my-org.feature:54:in `Given I click "This is my organisation" on the "Helpful Folk" page and stay there'
    And I click "toggle_link"                                                                                                                  # features/step_definitions/navigation_steps.rb:95
    When I sign up as "normal_user@myorg.com" with password "pppppppp" and password confirmation "pppppppp"                                    # features/step_definitions/authentication_steps.rb:23
    Then I should see "A message with a confirmation link has been sent to your email address. Please open the link to activate your account." # features/step_definitions/basic_steps.rb:271
    And I should be on the show page for the organisation named "Helpful Folk"                                                                 # features/step_definitions/navigation_steps.rb:55
    Then I should see "You have requested admin status for Helpful Folk"                                                                       # features/step_definitions/basic_steps.rb:271
    And "normal_user@myorg.com"'s request for "Helpful Folk" should be persisted                                                               # features/step_definitions/basic_steps.rb:340
    And I click on the confirmation link in the email to "normal_user@myorg.com"                                                               # features/step_definitions/authentication_steps.rb:98
    Then I should be on the show page for the organisation named "Helpful Folk"                                                                # features/step_definitions/navigation_steps.rb:55
    And an email should be sent to "admin@localsupport.org" as notification of the request for admin status of "Helpful Folk"                  # features/step_definitions/email_steps.rb:1

  @javascript
  Scenario: Unregistered User Who Fails Signin Once                                                                                           # features/individual_charity_pages/this-is-my-org.feature:67
    Given I click "This is my organisation" on the "Helpful Folk" page and stay there                                                         # features/step_definitions/basic_steps.rb:323
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      features/individual_charity_pages/this-is-my-org.feature:68:in `Given I click "This is my organisation" on the "Helpful Folk" page and stay there'
    When I click "toggle_link"                                                                                                                # features/step_definitions/navigation_steps.rb:95
    And I sign up as "newuser@myorg.com" with password "pppppppp" and password confirmation "qppppppp"                                        # features/step_definitions/authentication_steps.rb:23
    Then I should see "error"                                                                                                                 # features/step_definitions/basic_steps.rb:271
    And I sign up as "newuser@myorg.com" with password "pppppppp" and password confirmation "pppppppp" on the legacy sign up page             # features/step_definitions/authentication_steps.rb:23
    And I should see "A message with a confirmation link has been sent to your email address. Please open the link to activate your account." # features/step_definitions/basic_steps.rb:271
    And I should be on the show page for the organisation named "Helpful Folk"                                                                # features/step_definitions/navigation_steps.rb:55
    Then I should see "You have requested admin status for Helpful Folk"                                                                      # features/step_definitions/basic_steps.rb:271
    And "newuser@myorg.com"'s request for "Helpful Folk" should be persisted                                                                  # features/step_definitions/basic_steps.rb:340
    And I click on the confirmation link in the email to "newuser@myorg.com"                                                                  # features/step_definitions/authentication_steps.rb:98
    Then I should be on the show page for the organisation named "Helpful Folk"                                                               # features/step_definitions/navigation_steps.rb:55
    And an email should be sent to "admin@localsupport.org" as notification of the request for admin status of "Helpful Folk"                 # features/step_definitions/email_steps.rb:1

  Scenario: I have requested admin status but am not yet approved, I will see a notice only on the show page for the requested org # features/individual_charity_pages/this-is-my-org.feature:82
    Given I am signed in as a pending-admin of "Helpful Folk"                                                                      # features/step_definitions/authentication_steps.rb:17
    And I visit the show page for the organisation named "Helpful Folk"                                                            # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/individual_charity_pages/this-is-my-org.feature:84:in `And I visit the show page for the organisation named "Helpful Folk"'
    Then I should see "Your request for admin status is pending."                                                                  # features/step_definitions/basic_steps.rb:271
    And I visit the show page for the organisation named "The Other"                                                               # features/step_definitions/navigation_steps.rb:55
    Then I should not see "Your request for admin status is pending."                                                              # features/step_definitions/basic_steps.rb:271

Feature: Find local events feature
  As a member of the public
  So that I can find out what's going on locally
  I want to find local events
  Tracker story ID: https://www.pivotaltracker.com/story/show/45392619

Feature: Charity worker can edit own charity profile
  As a VAH staff member
  So that I can promote our events and services
  I want to have a web site advertising such.
  Display VAH events and services on homepage.
  Tracker story ID: https://www.pivotaltracker.com/story/show/45405215

Feature: Password retrieval
  As an existing User
  So that I can recover a lost password
  I want to be able to ask that system for a new password
  Tracker story ID: https://www.pivotaltracker.com/story/show/47376361

  Background:                                 # features/sign_in_sign_up/password_retrieval.feature:7
    Given the following organisations exist:  # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone | email                            |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 | registered-org-admin@example.com |
    Given the following users are registered: # features/step_definitions/factory_steps.rb:15
      | email                            | password | confirmed_at        | organisation |
      | registered-user@example.com      | pppppppp | 2014-01-20 16:27:36 |              |
      | registered-org-admin@example.com | pppppppp | 2014-01-20 16:27:36 | Friendly     |
    And cookies are approved                  # features/step_definitions/authentication_steps.rb:90
    Given I visit the home page               # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/sign_in_sign_up/password_retrieval.feature:19:in `Given I visit the home page'
    And I follow "Forgot your password?"      # features/step_definitions/navigation_steps.rb:104
    And the email queue is clear              # features/step_definitions/email_steps.rb:28

  @email
  Scenario Outline: Retrieving passwords                                                                               # features/sign_in_sign_up/password_retrieval.feature:24
    When I fill in "user_retrieval_email" with "<email>" within the main body                                          # features/step_definitions/basic_steps.rb:307
    And I press "Send me reset password instructions"                                                                  # features/step_definitions/navigation_steps.rb:91
    Then I should see "You will receive an email with instructions about how to reset your password in a few minutes." # features/step_definitions/basic_steps.rb:271
    And I should receive a "Reset password instructions" email                                                         # features/step_definitions/email_steps.rb:17
    Given I click on the retrieve password link in the email to "<email>"                                              # features/step_definitions/authentication_steps.rb:103
    Then I should be on the password reset page                                                                        # features/step_definitions/navigation_steps.rb:28
    And I fill in "user_password" with "12345678" within the main body                                                 # features/step_definitions/basic_steps.rb:307
    And I fill in "user_password_confirmation" with "12345678" within the main body                                    # features/step_definitions/basic_steps.rb:307
    And I press "Change my password"                                                                                   # features/step_definitions/navigation_steps.rb:91
    Then I should be on the <page>                                                                                     # features/step_definitions/navigation_steps.rb:28

    Examples: 
      | email                            | page                                            |
      | registered-user@example.com      | home page                                       |
      | registered-org-admin@example.com | show page for the organisation named "Friendly" |

  @email
  Scenario: Retrieve password for a non-existent user                                               # features/sign_in_sign_up/password_retrieval.feature:41
    When I fill in "user_retrieval_email" with "non-existent_user@example.com" within the main body # features/step_definitions/basic_steps.rb:307
    And I press "Send me reset password instructions"                                               # features/step_definitions/navigation_steps.rb:91
    And I should see "Email not found in our database. Sorry!"                                      # features/step_definitions/basic_steps.rb:271
    And I should not receive an email                                                               # features/step_definitions/email_steps.rb:24

Feature: Sign in
  As an existing User
  So that I can add charities to the list and make a page for my own charity
  I want to be able to login
  Tracker story ID: https://www.pivotaltracker.com/story/show/47373809

  Background:                                 # features/sign_in_sign_up/sign_in.feature:7
    Given the following organisations exist:  # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 |
    Given the following users are registered: # features/step_definitions/factory_steps.rb:15
      | email                     | password | admin | organisation | confirmed_at         |
      | normal_user@example.com   | pppppppp |       |              | 2007-01-01  10:00:00 |
      | site_admin@example.com    | pppppppp | true  |              | 2007-01-01  10:00:00 |
      | charity_owner@example.com | pppppppp | false | Friendly     | 2007-01-01  10:00:00 |
    Given I visit the home page               # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/sign_in_sign_up/sign_in.feature:17:in `Given I visit the home page'
    And cookies are approved                  # features/step_definitions/authentication_steps.rb:90

  Scenario: Sign in for an existing non-admin user unassociated with any organisation # features/sign_in_sign_up/sign_in.feature:20
    Given I sign in as "normal_user@example.com" with password "pppppppp"             # features/step_definitions/authentication_steps.rb:64
    Then I should see a link or button "normal_user@example.com"                      # features/step_definitions/basic_steps.rb:276

  Scenario: Sign in with wrong password for an existing non-admin user unassociated with any organisation # features/sign_in_sign_up/sign_in.feature:24
    Given I sign in as "normal_user@example.com" with password "12345"                                    # features/step_definitions/authentication_steps.rb:64
    Then I should be on the sign in page                                                                  # features/step_definitions/navigation_steps.rb:28
    And I should see "I'm sorry, you are not authorized to login to the system."                          # features/step_definitions/basic_steps.rb:271

  Scenario: Sign in for an existing non-admin user associated with an organisation # features/sign_in_sign_up/sign_in.feature:29
    Given I sign in as "charity_owner@example.com" with password "pppppppp"        # features/step_definitions/authentication_steps.rb:64
    Then I should be on the show page for the organisation named "Friendly"        # features/step_definitions/navigation_steps.rb:55
    And I should see a link or button "charity_owner@example.com"                  # features/step_definitions/basic_steps.rb:276

  Scenario: Sign in with wrong password for an existing non-admin user associated with an organisation # features/sign_in_sign_up/sign_in.feature:34
    Given I sign in as "charity_owner@example.com" with password "12345"                               # features/step_definitions/authentication_steps.rb:64
    Then I should be on the sign in page                                                               # features/step_definitions/navigation_steps.rb:28
    And I should see "I'm sorry, you are not authorized to login to the system."                       # features/step_definitions/basic_steps.rb:271

  Scenario: Sign in for an existing admin user                           # features/sign_in_sign_up/sign_in.feature:39
    Given I sign in as "site_admin@example.com" with password "pppppppp" # features/step_definitions/authentication_steps.rb:64
    Then I should be on the home page                                    # features/step_definitions/navigation_steps.rb:28
    And I should see a link or button "site_admin@example.com"           # features/step_definitions/basic_steps.rb:276

  Scenario: Sign in with wrong password for an existing admin user               # features/sign_in_sign_up/sign_in.feature:44
    Given I sign in as "site_admin@example.com" with password "12345"            # features/step_definitions/authentication_steps.rb:64
    Then I should be on the sign in page                                         # features/step_definitions/navigation_steps.rb:28
    And I should see "I'm sorry, you are not authorized to login to the system." # features/step_definitions/basic_steps.rb:271

  Scenario: Sign in for a non-existent user                                     # features/sign_in_sign_up/sign_in.feature:49
    Given I sign in as "non-existent_user@example.com" with password "pppppppp" # features/step_definitions/authentication_steps.rb:64
    Then I should be on the sign in page                                        # features/step_definitions/navigation_steps.rb:28
    And I should see "I'm sorry, you are not authorized to login to the system" # features/step_definitions/basic_steps.rb:271

  @javascript
  Scenario: Check that login/register toggle works # features/sign_in_sign_up/sign_in.feature:55
    Given I click "Login"                          # features/step_definitions/navigation_steps.rb:95
    Then the "loginForm" should be visible         # features/step_definitions/navigation_steps.rb:116
    And the "registerForm" should be not visible   # features/step_definitions/navigation_steps.rb:116
    And I should see "New organisation? Sign up"   # features/step_definitions/basic_steps.rb:271
    Given I click "toggle_link"                    # features/step_definitions/navigation_steps.rb:95
    Then the "loginForm" should be not visible     # features/step_definitions/navigation_steps.rb:116
    And the "registerForm" should be visible       # features/step_definitions/navigation_steps.rb:116
    And I should see "Already a member? Log in"    # features/step_definitions/basic_steps.rb:271
    Given I click "toggle_link"                    # features/step_definitions/navigation_steps.rb:95
    Then the "loginForm" should be visible         # features/step_definitions/navigation_steps.rb:116
    And the "registerForm" should be not visible   # features/step_definitions/navigation_steps.rb:116
    And I should see "New organisation? Sign up"   # features/step_definitions/basic_steps.rb:271

  Scenario: Check class of flash notice  - error                      # features/sign_in_sign_up/sign_in.feature:72
    Given I sign in as "site_admin@example.com" with password "12345" # features/step_definitions/authentication_steps.rb:64
    Then I should be on the sign in page                              # features/step_definitions/navigation_steps.rb:28
    And the "flash_alert" should be "alert-error"                     # features/step_definitions/navigation_steps.rb:130

  Scenario: Check class of flash notice  - success                       # features/sign_in_sign_up/sign_in.feature:78
    Given I sign in as "site_admin@example.com" with password "pppppppp" # features/step_definitions/authentication_steps.rb:64
    Then I should be on the home page                                    # features/step_definitions/navigation_steps.rb:28
    And the "flash_notice" should be "alert-success"                     # features/step_definitions/navigation_steps.rb:130

Feature: Sign out
  As a logged-in User
  So that noone else can use my account
  I want to sign out
  Tracker story ID: https://www.pivotaltracker.com/story/show/47373975

  #Scenario: Sign out
  #  Given PENDING that I am logged in as any user
  #  When I follow sign out
  #  Then I should be on the public home page
  Scenario: Sign out                           # features/sign_in_sign_up/sign_out.feature:12
    Given cookies are approved                 # features/step_definitions/authentication_steps.rb:90
    And that I am logged in as any user        # features/step_definitions/authentication_steps.rb:41
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      ./features/step_definitions/authentication_steps.rb:47:in `/^that I am logged in as any user$/'
      features/sign_in_sign_up/sign_out.feature:14:in `And that I am logged in as any user'
    When I sign out                            # features/step_definitions/authentication_steps.rb:60
    Then I should be on the home page          # features/step_definitions/navigation_steps.rb:28
    Then I should not be signed in as any user # features/step_definitions/authentication_steps.rb:53

Feature: Sign up
  As a new User
  So that I can add charities to the list and make a page for my own charity
  I want to be able to create a login
  Tracker story ID: https://www.pivotaltracker.com/story/show/47373595

  Background:                                 # features/sign_in_sign_up/sign_up.feature:7
    Given the following users are registered: # features/step_definitions/factory_steps.rb:15
      | email                      | password |
      | existent-user1@example.com | pppppppp |
      | existent-user2@example.com | pppppppp |
    And the email queue is clear              # features/step_definitions/email_steps.rb:28
    And cookies are approved                  # features/step_definitions/authentication_steps.rb:90

  @email
  Scenario: Sign up for an existing user                                                                        # features/sign_in_sign_up/sign_up.feature:15
    Given I visit the sign up page                                                                              # features/step_definitions/navigation_steps.rb:28
    And I sign up as "existent-user1@example.com" with password "pppppppp" and password confirmation "pppppppp" # features/step_definitions/authentication_steps.rb:23
    Then I should see "Email has already been taken"                                                            # features/step_definitions/basic_steps.rb:271
    And I should not receive an email                                                                           # features/step_definitions/email_steps.rb:24

  @email
  Scenario: Sign up for an non-existent user with non-matching password confirmation                               # features/sign_in_sign_up/sign_up.feature:22
    Given I visit the sign up page                                                                                 # features/step_definitions/navigation_steps.rb:28
    And I sign up as "nonexistent-user2@example.com" with password "pppppppp" and password confirmation "aaaaaaaa" # features/step_definitions/authentication_steps.rb:23
    Then I should see "Password confirmation doesn't match Password"                                               # features/step_definitions/basic_steps.rb:271
    And I should not receive an email                                                                              # features/step_definitions/email_steps.rb:24

  @email
  Scenario: Sign up for a non-existent user                                                                                                   # features/sign_in_sign_up/sign_up.feature:29
    Given I visit the sign up page                                                                                                            # features/step_definitions/navigation_steps.rb:28
    And I sign up as "non-existent-user@example.com" with password "pppppppp" and password confirmation "pppppppp"                            # features/step_definitions/authentication_steps.rb:23
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/authentication_steps.rb:36:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/authentication_steps.rb:32:in `/^I sign up as "(.*?)" with password "(.*?)" and password confirmation "(.*?)"( on the legacy sign up page)?$/'
      features/sign_in_sign_up/sign_up.feature:31:in `And I sign up as "non-existent-user@example.com" with password "pppppppp" and password confirmation "pppppppp"'
    Then I should be on the home page                                                                                                         # features/step_definitions/navigation_steps.rb:28
    And I should see "A message with a confirmation link has been sent to your email address. Please open the link to activate your account." # features/step_definitions/basic_steps.rb:271
    And I should receive a "Confirmation instructions" email                                                                                  # features/step_definitions/email_steps.rb:17
    And I click on the confirmation link in the email to "non-existent-user@example.com"                                                      # features/step_definitions/authentication_steps.rb:98
    Then I should be on the home page                                                                                                         # features/step_definitions/navigation_steps.rb:28

Feature: If new user's email matches an org's email, the new user with have edit powers for that org
  As a new user
  So that I can quickly start editing the page for my org
  I want to automatically have editing powers if I sign up with an email address that matches my org
  Tracker story ID: https://www.pivotaltracker.com/story/show/50085485

  Background:                                # features/sign_in_sign_up/sign_up_link_to_org.feature:7
    Given the following organisations exist: # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone | email             |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 | info@friendly.org |
    And cookies are approved                 # features/step_definitions/authentication_steps.rb:90

  Scenario: Sign up and CANNOT edit                                                                      # features/sign_in_sign_up/sign_up_link_to_org.feature:13
    Given I visit the sign up page                                                                       # features/step_definitions/navigation_steps.rb:28
    And I sign up as "tester@friendly.org" with password "12345678" and password confirmation "12345678" # features/step_definitions/authentication_steps.rb:23
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/authentication_steps.rb:36:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/authentication_steps.rb:32:in `/^I sign up as "(.*?)" with password "(.*?)" and password confirmation "(.*?)"( on the legacy sign up page)?$/'
      features/sign_in_sign_up/sign_up_link_to_org.feature:15:in `And I sign up as "tester@friendly.org" with password "12345678" and password confirmation "12345678"'
    And I sign in as "tester@friendly.org" with password "12345678" via email confirmation               # features/step_definitions/authentication_steps.rb:74
    And I visit the show page for the organisation named "Friendly"                                      # features/step_definitions/navigation_steps.rb:55
    Then I should not see an edit button for "Friendly" charity                                          # features/step_definitions/basic_steps.rb:57

  Scenario: Sign up and can edit                                                                       # features/sign_in_sign_up/sign_up_link_to_org.feature:20
    Given I visit the sign up page                                                                     # features/step_definitions/navigation_steps.rb:28
    And I sign up as "info@friendly.org" with password "12345678" and password confirmation "12345678" # features/step_definitions/authentication_steps.rb:23
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/authentication_steps.rb:36:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/authentication_steps.rb:32:in `/^I sign up as "(.*?)" with password "(.*?)" and password confirmation "(.*?)"( on the legacy sign up page)?$/'
      features/sign_in_sign_up/sign_up_link_to_org.feature:22:in `And I sign up as "info@friendly.org" with password "12345678" and password confirmation "12345678"'
    And I sign in as "info@friendly.org" with password "12345678" via email confirmation               # features/step_definitions/authentication_steps.rb:74
    And I visit the show page for the organisation named "Friendly"                                    # features/step_definitions/navigation_steps.rb:55
    Then I should see an edit button for "Friendly" charity                                            # features/step_definitions/basic_steps.rb:57

Feature: I want to have a contact and about us link in all the app pages
  As the system owner
  So that I can be contacted
  I want to show a contact page and an about us page
  Tracker story ID: https://www.pivotaltracker.com/story/show/45693625

  Background: organisations have been added to database # features/staticpages.feature:7
    Given the following organisations exist:            # features/step_definitions/factory_steps.rb:8
      | name             | address        |
      | Friendly Charity | 83 pinner road |
    Given the following pages exist:                    # features/step_definitions/factory_steps.rb:45
      | name         | permalink | content                                                   | link_visible |
      | 404          | 404       | We're sorry, but we couldn't find the page you requested! | false        |
      | About Us     | about     | abc123                                                    | true         |
      | Contact Info | contact   | def456                                                    | true         |

  Scenario Outline: the about us page is accessible on all pages # features/staticpages.feature:17
    Given I visit the <page>                                     # features/step_definitions/navigation_steps.rb:28
    When I follow "About Us"                                     # features/step_definitions/navigation_steps.rb:104
    Then I should see "abc123"                                   # features/step_definitions/basic_steps.rb:271

    Examples: 
      | page                                                    |
      | home page                                               |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/staticpages.feature:18:in `Given I visit the <page>'
      | organisations index page                                |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/staticpages.feature:18:in `Given I visit the <page>'
      | new organisation page                                   |
      | show page for the organisation named "Friendly Charity" |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/staticpages.feature:18:in `Given I visit the <page>'

  Scenario Outline: the contact page is accessible on all pages # features/staticpages.feature:28
    Given I visit the <page>                                    # features/step_definitions/navigation_steps.rb:28
    When I follow "Contact"                                     # features/step_definitions/navigation_steps.rb:104
    Then I should see "def456"                                  # features/step_definitions/basic_steps.rb:271

    Examples: 
      | page                                                    |
      | home page                                               |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/staticpages.feature:29:in `Given I visit the <page>'
      | organisations index page                                |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/staticpages.feature:29:in `Given I visit the <page>'
      | new organisation page                                   |
      | show page for the organisation named "Friendly Charity" |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/staticpages.feature:29:in `Given I visit the <page>'

Feature: Org admin creating a volunteer work opportunity
  As an organisation admin
  So that I can recruit volunteers
  I would like to be able to add a volunteering opportunity to the system
  https://www.pivotaltracker.com/story/show/66059456

  Background:                                         # features/volunteer_opportunities/create_volunteer_opportunities.feature:7
    Given the following organisations exist:          # features/step_definitions/factory_steps.rb:8
      | name     | description             | address        | postcode | telephone | website                     | email                      |
      | Friendly | Bereavement Counselling | 34 pinner road | HA1 4HZ  | 020800000 | http://friendly.example.org | admin@friendly.example.org |
      | Shy      | Software design         | 34 pinner road | HA1 1AA  | 020800001 | http://shy.example.org      | admin@shy.example.org      |
    And the following users are registered:           # features/step_definitions/factory_steps.rb:15
      | email                      | password | organisation | confirmed_at        | admin |
      | friend@harrowcn.org.uk     | pppppppp |              | 2007-01-01 10:00:00 | false |
      | admin@friendly.example.org | pppppppp | Friendly     | 2007-01-01 10:00:00 | false |
      | admin@shy.example.org      | pppppppp | Shy          | 2007-01-01 10:00:00 | false |
      | admin@harrowcn.org.uk      | pppppppp | Shy          | 2007-01-01 10:00:00 | true  |
    And that the volunteer_ops_create flag is enabled # features/step_definitions/volunteer_op_steps.rb:11
    And cookies are approved                          # features/step_definitions/authentication_steps.rb:90

  Scenario: Org-admins can create a volunteer opportunity                        # features/volunteer_opportunities/create_volunteer_opportunities.feature:22
    Given I am signed in as a charity worker related to "Friendly"               # features/step_definitions/authentication_steps.rb:1
    And I submit a volunteer op "Hard Work", "For no pay" on the "Friendly" page # features/step_definitions/volunteer_op_steps.rb:1
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/volunteer_op_steps.rb:3:in `/^I submit a volunteer op "(.*?)", "(.*?)" on the "(.*?)" page$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:24:in `And I submit a volunteer op "Hard Work", "For no pay" on the "Friendly" page'
    Then I should be on the show page for the volunteer_op titled "Hard Work"    # features/step_definitions/navigation_steps.rb:55
    And I should see "Hard Work", "For no pay" and "Organisation: Friendly"      # features/step_definitions/basic_steps.rb:260

  Scenario: Org-admins can create a volunteer opportunity but get warning with invalid data # features/volunteer_opportunities/create_volunteer_opportunities.feature:28
    Given I am signed in as a charity worker related to "Friendly"                          # features/step_definitions/authentication_steps.rb:1
    And I submit a volunteer op "", "" on the "Friendly" page                               # features/step_definitions/volunteer_op_steps.rb:1
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/volunteer_op_steps.rb:3:in `/^I submit a volunteer op "(.*?)", "(.*?)" on the "(.*?)" page$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:30:in `And I submit a volunteer op "", "" on the "Friendly" page'
    And I should see "Title can't be blank" and "Description can't be blank"                # features/step_definitions/basic_steps.rb:266

  Scenario: Site Admin users can create Volunteer Opportunities                  # features/volunteer_opportunities/create_volunteer_opportunities.feature:33
    Given I am signed in as a admin                                              # features/step_definitions/authentication_steps.rb:12
    And I submit a volunteer op "Hard Work", "For no pay" on the "Friendly" page # features/step_definitions/volunteer_op_steps.rb:1
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/volunteer_op_steps.rb:3:in `/^I submit a volunteer op "(.*?)", "(.*?)" on the "(.*?)" page$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:35:in `And I submit a volunteer op "Hard Work", "For no pay" on the "Friendly" page'
    Then I should be on the show page for the volunteer_op titled "Hard Work"    # features/step_definitions/navigation_steps.rb:55
    And I should see "Hard Work", "For no pay" and "Organisation: Friendly"      # features/step_definitions/basic_steps.rb:260

  Scenario: Signed In Users cannot create volunteer opportunities           # features/volunteer_opportunities/create_volunteer_opportunities.feature:39
    Given I am signed in as a charity worker related to "Shy"               # features/step_definitions/authentication_steps.rb:1
    And I visit the show page for the organisation named "Friendly"         # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:41:in `And I visit the show page for the organisation named "Friendly"'
    Then I should not see a link with text "Create a Volunteer Opportunity" # features/step_definitions/basic_steps.rb:245

  Scenario: Signed In Users cannot create volunteer opportunities on the sly                                 # features/volunteer_opportunities/create_volunteer_opportunities.feature:44
    Given I am signed in as a charity worker related to "Friendly"                                           # features/step_definitions/authentication_steps.rb:1
    And I visit the new volunteer op page for "Shy"                                                          # features/step_definitions/navigation_steps.rb:45
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:49:in `/^I (visit|should be on) the new volunteer op page for "(.*?)"$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:46:in `And I visit the new volunteer op page for "Shy"'
    Then I should see "You must be signed in as an organisation owner or site admin to perform this action!" # features/step_definitions/basic_steps.rb:271

  Scenario: Not Signed In Users cannot create volunteer opportunities       # features/volunteer_opportunities/create_volunteer_opportunities.feature:49
    Given I visit the show page for the organisation named "Friendly"       # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:50:in `Given I visit the show page for the organisation named "Friendly"'
    Then I should not see a link with text "Create a Volunteer Opportunity" # features/step_definitions/basic_steps.rb:245

  Scenario: Not Signed In Users cannot create volunteer opportunities on the sly                             # features/volunteer_opportunities/create_volunteer_opportunities.feature:53
    And I visit the new volunteer op page for "Shy"                                                          # features/step_definitions/navigation_steps.rb:45
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:49:in `/^I (visit|should be on) the new volunteer op page for "(.*?)"$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:54:in `And I visit the new volunteer op page for "Shy"'
    Then I should see "You must be signed in as an organisation owner or site admin to perform this action!" # features/step_definitions/basic_steps.rb:271

  # TESTS TO CHECK WHETHER API ENDPOINT IS SECURE ARE IN REQUEST SPECS
  # FEATURE FLAG RELATED SCENARIOS
  Scenario: Org-admins can see a Volunteer Opportunity button when feature is enabled # features/volunteer_opportunities/create_volunteer_opportunities.feature:61
    And I am signed in as a charity worker related to "Shy"                           # features/step_definitions/authentication_steps.rb:1
    And I visit the show page for the organisation named "Shy"                        # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:63:in `And I visit the show page for the organisation named "Shy"'
    Then I should see a link with text "Create a Volunteer Opportunity"               # features/step_definitions/basic_steps.rb:245

  Scenario: Org-admins cannot see a Volunteer Opportunity button when feature is disabled # features/volunteer_opportunities/create_volunteer_opportunities.feature:66
    Given that the volunteer_ops_create flag is disabled                                  # features/step_definitions/volunteer_op_steps.rb:11
    And I am signed in as a charity worker related to "Shy"                               # features/step_definitions/authentication_steps.rb:1
    And I visit the show page for the organisation named "Shy"                            # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/show.html.erb:85:in `_app_views_organisations_show_html_erb__11490197017221004_68614820'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/create_volunteer_opportunities.feature:69:in `And I visit the show page for the organisation named "Shy"'
    Then I should not see a link with text "Create a Volunteer Opportunity"               # features/step_definitions/basic_steps.rb:245

Feature: Org owner can edit volunteer opportunities
  As an org owner
  To keep my volunteer opportunities fresh
  I would like to be able to edit them
  https://www.pivotaltracker.com/story/show/73959288

  Background:                                                                                                # features/volunteer_opportunities/edit_volunteer_opportunities.feature:7
    Given the following organisations exist:                                                                 # features/step_definitions/factory_steps.rb:8
      | name        | description    | address        | postcode |
      | Cats Are Us | Animal Shelter | 34 pinner road | HA1 4HZ  |
      | Dogs Rule   | Dog lovers     | 34 pinner road | HA1 4HZ  |
    And the following users are registered:                                                                  # features/step_definitions/factory_steps.rb:15
      | email                         | password | organisation | confirmed_at        | admin |
      | registered-user-1@example.com | pppppppp | Cats Are Us  | 2007-01-01 10:00:00 | false |
      | dogs@example.com              | pppppppp | Dogs Rule    | 2007-01-01 10:00:00 | false |
    And the following volunteer opportunities exist:                                                         # features/step_definitions/factory_steps.rb:24
      | title              | description                   | organisation |
      | Litter Box Scooper | Assist with feline sanitation | Cats Are Us  |
    Given I am signed in as a charity worker related to "Cats Are Us"                                        # features/step_definitions/authentication_steps.rb:1
    And I visit the show page for the volunteer_op titled "Litter Box Scooper"                               # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/edit_volunteer_opportunities.feature:21:in `And I visit the show page for the volunteer_op titled "Litter Box Scooper"'
    And I click "Edit"                                                                                       # features/step_definitions/navigation_steps.rb:95
    Then I should be on the edit page for the volunteer_op titled "Litter Box Scooper"                       # features/step_definitions/navigation_steps.rb:55
    Given I am signed in as a charity worker related to "Dogs Rule"                                          # features/step_definitions/authentication_steps.rb:1
    And I visit the show page for the volunteer_op titled "Litter Box Scooper"                               # features/step_definitions/navigation_steps.rb:55
    And I should not see a link or button "Edit"                                                             # features/step_definitions/basic_steps.rb:276
    And I visit the edit page for the volunteer_op titled "Litter Box Scooper"                               # features/step_definitions/navigation_steps.rb:55
    Then I should see "You must be signed in as an organisation owner or site admin to perform this action!" # features/step_definitions/basic_steps.rb:271

Feature: As a member of the public
  So that I can find out where I can volunteer my time
  I would like to see a list of volunteer opportunities
  Tracker story ID: https://www.pivotaltracker.com/story/show/66059724

  Background: organisations with volunteer opportunities have been added to database # features/volunteer_opportunities/list_volunteer_opportunities.feature:6
    Given the following organisations exist:                                         # features/step_definitions/factory_steps.rb:8
      | name                      | description          | address        | postcode | website       |
      | Cats Are Us               | Animal Shelter       | 34 pinner road | HA1 4HZ  | http://a.com/ |
      | Indian Elders Association | Care for the elderly | 64 pinner road | HA1 4HA  | http://b.com/ |
    Given the following volunteer opportunities exist:                               # features/step_definitions/factory_steps.rb:24
      | title              | description                     | organisation              |
      | Litter Box Scooper | Assist with feline sanitation   | Cats Are Us               |
      | Office Support     | Help with printing and copying. | Indian Elders Association |

  Scenario: See a list of current volunteer opportunities # features/volunteer_opportunities/list_volunteer_opportunities.feature:17
    Given I visit the volunteer opportunities page        # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/index.html.erb:22:in `_app_views_volunteer_ops_index_html_erb__4421316091801771968_84448980'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/volunteer_opportunities/list_volunteer_opportunities.feature:18:in `Given I visit the volunteer opportunities page'
    And cookies are approved                              # features/step_definitions/authentication_steps.rb:90
    Then the index should contain:                        # features/step_definitions/basic_steps.rb:421
      | Litter Box Scooper | Assist with feline sanitation   | Cats Are Us               |
      | Office Support     | Help with printing and copying. | Indian Elders Association |

  Scenario: Volunteer index page has two column layout # features/volunteer_opportunities/list_volunteer_opportunities.feature:23
    Given I visit the volunteer opportunities page     # features/step_definitions/navigation_steps.rb:28
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/index.html.erb:22:in `_app_views_volunteer_ops_index_html_erb__4421316091801771968_84448980'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/volunteer_opportunities/list_volunteer_opportunities.feature:24:in `Given I visit the volunteer opportunities page'
    Then I should see a two column layout              # features/step_definitions/navigation_steps.rb:80

  Scenario Outline: Top navbar links to Volunteers and Organisations are hidden when feature is disabled # features/volunteer_opportunities/list_volunteer_opportunities.feature:27
    Given that the volunteer_ops_list flag is disabled                                                   # features/step_definitions/volunteer_op_steps.rb:11
    And I visit the home page                                                                            # features/step_definitions/navigation_steps.rb:28
    Then the navbar should not have a link to <link>                                                     # features/step_definitions/basic_steps.rb:281

    Examples: 
      | link          |
      | Volunteers    |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/volunteer_opportunities/list_volunteer_opportunities.feature:29:in `And I visit the home page'
      | Organisations |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/volunteer_opportunities/list_volunteer_opportunities.feature:29:in `And I visit the home page'

  Scenario Outline: Top navbar has links to Volunteers and Organisations when feature is enabled # features/volunteer_opportunities/list_volunteer_opportunities.feature:36
    Given that the volunteer_ops_list flag is enabled                                            # features/step_definitions/volunteer_op_steps.rb:11
    And I visit the home page                                                                    # features/step_definitions/navigation_steps.rb:28
    Then the navbar should have a link to <link>                                                 # features/step_definitions/basic_steps.rb:281

    Examples: 
      | link          |
      | Volunteers    |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/volunteer_opportunities/list_volunteer_opportunities.feature:38:in `And I visit the home page'
      | Organisations |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/organisations/index.html.erb:35:in `_app_views_organisations_index_html_erb___450354769657566222_72877320'
      ./features/step_definitions/navigation_steps.rb:32:in `/^I (visit|should be on) the (.*) page$/'
      features/volunteer_opportunities/list_volunteer_opportunities.feature:38:in `And I visit the home page'

Feature: As a member of the public
  So that I can see where organisations with volunteer opportunities are located
  I would like to see a map of volunteer opportunities
  Tracker story ID: https://www.pivotaltracker.com/story/show/66059862

  Background: organisations with volunteer opportunities have been added to database # features/volunteer_opportunities/map_volunteer_opportunities.feature:6
    Given the following organisations exist:                                         # features/step_definitions/factory_steps.rb:8
      | name                      | description          | address        | postcode | website       |
      | Cats Are Us               | Animal Shelter       | 34 pinner road | HA1 4HZ  | http://a.com/ |
      | Indian Elders Association | Care for the elderly | 64 pinner road | HA1 4HA  | http://b.com/ |
    Given the following users are registered:                                        # features/step_definitions/factory_steps.rb:15
      | email                         | password | organisation | confirmed_at         |
      | registered_user-1@example.com | pppppppp | Cats Are Us  | 2007-01-01  10:00:00 |
    Given the following volunteer opportunities exist:                               # features/step_definitions/factory_steps.rb:24
      | title              | description                     | organisation              |
      | Litter Box Scooper | Assist with feline sanitation   | Cats Are Us               |
      | Office Support     | Help with printing and copying. | Indian Elders Association |

  @javascript
  Scenario: See a map of current volunteer opportunities      # features/volunteer_opportunities/map_volunteer_opportunities.feature:21
    Given I visit the volunteer opportunities page            # features/step_definitions/navigation_steps.rb:28
    And cookies are approved                                  # features/step_definitions/authentication_steps.rb:90
    And I should see the following vol_op markers in the map: # features/step_definitions/map_steps.rb:32
      | Indian Elders Association | Cats Are Us |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/index.html.erb:22:in `_app_views_volunteer_ops_index_html_erb__4421316091801771968_84448980'
      features/volunteer_opportunities/map_volunteer_opportunities.feature:24:in `And I should see the following vol_op markers in the map:'

  @javascript
  Scenario Outline: Volunteer opportunites are listed in map popups # features/volunteer_opportunities/map_volunteer_opportunities.feature:28
    Given I visit the volunteer opportunities page                  # features/step_definitions/navigation_steps.rb:28
    And cookies are approved                                        # features/step_definitions/authentication_steps.rb:90
    And the map should show the opportunity titled <title>          # features/step_definitions/map_steps.rb:41

    Examples: 
      | title              |
      | Litter Box Scooper |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/index.html.erb:22:in `_app_views_volunteer_ops_index_html_erb__4421316091801771968_84448980'
      features/volunteer_opportunities/map_volunteer_opportunities.feature:31:in `And the map should show the opportunity titled <title>'
      | Office Support     |
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/index.html.erb:22:in `_app_views_volunteer_ops_index_html_erb__4421316091801771968_84448980'
      features/volunteer_opportunities/map_volunteer_opportunities.feature:31:in `And the map should show the opportunity titled <title>'

  @javascript
  Scenario: See map when editing my volunteer opportunity                      # features/volunteer_opportunities/map_volunteer_opportunities.feature:38
    Given I am signed in as a charity worker related to "Cats Are Us"          # features/step_definitions/authentication_steps.rb:1
    And I visit the edit page for the volunteer_op titled "Litter Box Scooper" # features/step_definitions/navigation_steps.rb:55
    Then the map should show the opportunity titled Litter Box Scooper         # features/step_definitions/map_steps.rb:41
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/_form.html.erb:24:in `_app_views_volunteer_ops__form_html_erb___4067194767075281785_82791540'
      ./app/views/volunteer_ops/edit.html.erb:1:in `_app_views_volunteer_ops_edit_html_erb__1392209062662113802_82785080'
      features/volunteer_opportunities/map_volunteer_opportunities.feature:41:in `Then the map should show the opportunity titled Litter Box Scooper'

Feature: As a member of the public
  So that I can make contact with an organisation about volunteering
  I would like ot see more details about a volunteer opportunity

  Background:                                          # features/volunteer_opportunities/show_volunteer_opportunity.feature:5
    Given the following organisations exist:           # features/step_definitions/factory_steps.rb:8
      | name                      | description          | address        | postcode | website       |
      | Cats Are Us               | Animal Shelter       | 34 pinner road | HA1 4HZ  | http://a.com/ |
      | Indian Elders Association | Care for the elderly | 64 pinner road | HA1 4HA  | http://b.com/ |
    Given the following volunteer opportunities exist: # features/step_definitions/factory_steps.rb:24
      | title              | description                                     | organisation              |
      | Litter Box Scooper | Assist with feline sanitation   test@test.com   | Cats Are Us               |
      | Office Support     | Help with printing and copying. http://test.com | Indian Elders Association |

  Scenario: See a volunteer opportunity and hyperlink                                        # features/volunteer_opportunities/show_volunteer_opportunity.feature:15
    Given I visit the show page for the volunteer_op titled "Office Support"                 # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/show_volunteer_opportunity.feature:16:in `Given I visit the show page for the volunteer_op titled "Office Support"'
    Then I should see:                                                                       # features/step_definitions/basic_steps.rb:414
      | title          | description                     | organisation              |
      | Office Support | Help with printing and copying. | Indian Elders Association |
    And I click "Indian Elders Association"                                                  # features/step_definitions/navigation_steps.rb:95
    Then I should be on the show page for the organisation named "Indian Elders Association" # features/step_definitions/navigation_steps.rb:55

  Scenario: See URLs in volunteer opportunity pages are hyperlinked          # features/volunteer_opportunities/show_volunteer_opportunity.feature:23
    Given I visit the show page for the volunteer_op titled "Office Support" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/show_volunteer_opportunity.feature:24:in `Given I visit the show page for the volunteer_op titled "Office Support"'
    Then the page includes a hyperlink to "http://test.com"                  # features/step_definitions/navigation_steps.rb:154

  Scenario: See emails in volunteer opportunity pages are hyperlinked            # features/volunteer_opportunities/show_volunteer_opportunity.feature:27
    Given I visit the show page for the volunteer_op titled "Litter Box Scooper" # features/step_definitions/navigation_steps.rb:55
      couldn't find file 'gmaps-markerclusterer-plus/src/markerclusterer'
        (in /home/db/LocalSupport/app/assets/javascripts/google_map.js.coffee:2) (Sprockets::FileNotFound)
      ./app/views/shared/_map_scripts.html.erb:2:in `block in _app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/shared/_map_scripts.html.erb:1:in `_app_views_shared__map_scripts_html_erb___3853230429209640494_74198220'
      ./app/views/volunteer_ops/show.html.erb:18:in `_app_views_volunteer_ops_show_html_erb___2033553846928131379_75704980'
      ./features/step_definitions/navigation_steps.rb:64:in `/^I (visit|should be on) the (edit|show) page for the (.*?) (named|titled) "(.*?)"$/'
      features/volunteer_opportunities/show_volunteer_opportunity.feature:28:in `Given I visit the show page for the volunteer_op titled "Litter Box Scooper"'
    Then the page includes email hyperlink "test@test.com"                       # features/step_definitions/navigation_steps.rb:159

Failing Scenarios:
cucumber features/admin/acknowledging_contributors_site.feature:8 # Scenario: Display acknowledgements
cucumber features/admin/acknowledging_contributors_site.feature:8 # Scenario: Display acknowledgements
cucumber features/admin/admin_delete_charity.feature:18 # Scenario: Admin successfully deletes a charity   # scenario 'Admin successfully deletes a charity' do
cucumber features/admin/admin_delete_charity.feature:26 # Scenario: Org admin cannot see delete button
cucumber features/admin/admin_delete_charity.feature:31 # Scenario: Non-admin cannot see delete button
cucumber features/admin/admin_delete_charity.feature:36 # Scenario: Public cannot see delete button
cucumber features/admin/admin_delete_charity.feature:40 # Scenario: Non-admin unsuccessfully attempts to delete a charity directly
cucumber features/admin/admin_edit_charity.feature:18 # Scenario: Admin successfully changes the address of a charity
cucumber features/admin/admin_edit_charity.feature:30 # Scenario: Non-admin sees no permission error when visiting the edit form for charity
cucumber features/admin/admin_edit_static_page_links.feature:19 # Scenario: Having all pages show automatically
cucumber features/admin/admin_edit_static_page_links.feature:24 # Scenario: Admin can unlink and then link page, using its edit page
cucumber features/admin/admin_edit_static_pages.feature:36 # Scenario: Admin can edit
cucumber features/admin/admin_edit_static_pages.feature:44 # Scenario: Non-admin cannot edit
cucumber features/admin/admin_edit_static_pages.feature:50 # Scenario: Admin can see pages index
cucumber features/admin/admin_edit_static_pages.feature:57 # Scenario: Pages index is sorted by default
cucumber features/admin/admin_edit_static_pages.feature:64 # Scenario: Non-admin cannot see pages index
cucumber features/admin/admin_edit_static_pages.feature:80 # Scenario: Basic markdown syntax works
cucumber features/admin/admin_edit_volunteer_op.feature:19 # Scenario: 
cucumber features/admin/admin_edit_volunteer_op.feature:24 # Scenario: 
cucumber features/admin/admin_edit_volunteer_op.feature:29 # Scenario: 
cucumber features/admin/admin_edit_volunteer_op.feature:34 # Scenario: Admin successfully changes the description of an opportunity
cucumber features/admin/admin_new_charity.feature:44 # Scenario: Successfully create charity while being signed-in as admin
cucumber features/admin/admin_new_charity.feature:49 # Scenario: Successfully create charity while being signed-in as admin from arbitrary page
cucumber features/admin/admin_new_charity.feature:63 # Scenario: Non-admin unsuccessfully attempts to create an organisation
cucumber features/admin/admin_new_charity.feature:71 # Scenario: non logged in user should not see new organisation link
cucumber features/admin/admin_new_charity.feature:75 # Scenario: logged in non-admin user should not see new organisation link
cucumber features/admin/admin_notified_on_signup.feature:15 # Scenario: Email is sent when new user signs up
cucumber features/admin/admin_promoting_site.feature:9 # Scenario: Be aware of site identity on all pages
cucumber features/admin/admin_promoting_site.feature:9 # Scenario: Be aware of site identity on all pages
cucumber features/admin/navbar.feature:17 # Scenario: Top navbar has an Admin dropdown menu
cucumber features/admin/organisation_reports/without_users.feature:48 # Scenario: As a non-admin trying to access orphans index
cucumber features/admin/organisation_reports/without_users.feature:77 # Scenario: Invited user clicking through on email with cookies policy clicked
cucumber features/admin/organisation_reports/without_users.feature:83 # Scenario: Invited user clicking through on email ignoring cookies policy
cucumber features/admin/organisation_reports/without_users.feature:88 # Scenario: Invited user email is out of date
cucumber features/admin/user_reports/admin_approve_charity_admin.feature:54 # Scenario: As a non-admin trying to access users index
cucumber features/admin/user_reports/manage_charity_admins.feature:17 # Scenario: Existing charity admin appears in form when editing charity
cucumber features/admin/user_reports/manage_charity_admins.feature:22 # Scenario: No admin message displayed when charity has no admins
cucumber features/admin/user_reports/manage_charity_admins.feature:27 # Scenario: Cannot add non-existent user as charity admin
cucumber features/admin/user_reports/manage_charity_admins.feature:33 # Scenario: Successfully add existent user as charity admin
cucumber features/cookie-policy.feature:15 # Scenario: User approving the cookies
cucumber features/disclaimer.feature:17 # Scenario: the disclaimer page is accessible on all pages
cucumber features/disclaimer.feature:17 # Scenario: the disclaimer page is accessible on all pages
cucumber features/disclaimer.feature:17 # Scenario: the disclaimer page is accessible on all pages
cucumber features/display_project_contributors.feature:10 # Scenario: Display project contributors
cucumber features/home_page/category.feature:25 # Scenario: Search for organisations in the "Animal Welfare" category
cucumber features/home_page/category.feature:34 # Scenario: Search for dogs in the Animal Welfare category
cucumber features/home_page/home_button.feature:20 # Scenario: Find help with care for elderly
cucumber features/home_page/home_button.feature:20 # Scenario: Find help with care for elderly
cucumber features/home_page/home_button.feature:20 # Scenario: Find help with care for elderly
cucumber features/home_page/home_button.feature:20 # Scenario: Find help with care for elderly
cucumber features/home_page/local_resident_seeking_support.feature:16 # Scenario: Find help with care for elderly
cucumber features/home_page/local_resident_seeking_support.feature:27 # Scenario: Find a bereavement counsellor
cucumber features/home_page/local_resident_seeking_support.feature:37 # Scenario: Find friendly no search results message
cucumber features/home_page/local_resident_seeking_support.feature:44 # Scenario: See a list of current organisations
cucumber features/home_page/map.feature:21 # Scenario: Show all charities in map on homepage map
cucumber features/home_page/map.feature:27 # Scenario: Infowindow appears when clicking on map marker
cucumber features/home_page/map.feature:33 # Scenario: Organisation map has small icon for organisations updated more than 365 days ago
cucumber features/home_page/map.feature:33 # Scenario: Organisation map has small icon for organisations updated more than 365 days ago
cucumber features/home_page/map.feature:33 # Scenario: Organisation map has small icon for organisations updated more than 365 days ago
cucumber features/home_page/map.feature:33 # Scenario: Organisation map has small icon for organisations updated more than 365 days ago
cucumber features/home_page/map.feature:33 # Scenario: Organisation map has small icon for organisations updated more than 365 days ago
cucumber features/home_page/map.feature:33 # Scenario: Organisation map has small icon for organisations updated more than 365 days ago
cucumber features/home_page/map.feature:33 # Scenario: Organisation map has small icon for organisations updated more than 365 days ago
cucumber features/home_page/map.feature:48 # Scenario: Organisation map has small icon for organisation with no users
cucumber features/home_page/map.feature:52 # Scenario: Changing address on the map changes the map coordinates
cucumber features/home_page/sort_charities_by_update_time.feature:15 # Scenario: Most recently updated charity shows at the top of the list
cucumber features/home_page/sort_charities_by_update_time.feature:21 # Scenario: Most recently updated charity shows at the top of the list
cucumber features/individual_charity_pages/charity_page.feature:31 # Scenario: be able to view link to charity site on individual charity page
cucumber features/individual_charity_pages/donation_info.feature:13 # Scenario: Org page of an organisation with donation info URL
cucumber features/individual_charity_pages/edit_donation_info.feature:20 # Scenario: Successfully change the donation url for a charity
cucumber features/individual_charity_pages/edit_form_tooltips.feature:18 # Scenario: Display tooltip for each field on the edit form
cucumber features/individual_charity_pages/edit_form_tooltips.feature:33 # Scenario: Display tooltip for each checkbox on the edit form
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:37 # Scenario: Successfully add website url without protocol
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:42 # Scenario: Successfully change the address of a charity
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:47 # Scenario: Successfully mark a field of a charity as public or private
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:47 # Scenario: Successfully mark a field of a charity as public or private
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:47 # Scenario: Successfully mark a field of a charity as public or private
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:47 # Scenario: Successfully mark a field of a charity as public or private
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:47 # Scenario: Successfully mark a field of a charity as public or private
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:47 # Scenario: Successfully mark a field of a charity as public or private
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:75 # Scenario: Do not see edit button as non-admin not associated with Friendly
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:80 # Scenario: Non-logged in users do not see edit button either
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:84 # Scenario: Change the address of a charity when Google is indisposed
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:102 # Scenario: By default, not display organisations address and phone number on home page
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:106 # Scenario: By default, not display organisations edit and delete on home page
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:110 # Scenario: By default, not display organisations address and phone number on details page
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:114 # Scenario: By default, not display edit link on details page
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:118 # Scenario: Edit page has scroll box for selecting categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:134 # Scenario: Appropriate categories are checked/unchecked by default
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:150 # Scenario: Successfully add and remove an organisation's categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:150 # Scenario: Successfully add and remove an organisation's categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:150 # Scenario: Successfully add and remove an organisation's categories
cucumber features/individual_charity_pages/edit_own_charity_profile.feature:150 # Scenario: Successfully add and remove an organisation's categories
cucumber features/individual_charity_pages/remind_charity_admin_to_update_page.feature:19 # Scenario: Org owner is reminded to update details after a year
cucumber features/individual_charity_pages/remind_charity_admin_to_update_page.feature:27 # Scenario: Org owner is not reminded to update details prior to a year
cucumber features/individual_charity_pages/this-is-my-org.feature:20 # Scenario: Signed in User
cucumber features/individual_charity_pages/this-is-my-org.feature:31 # Scenario: Not Signed in User
cucumber features/individual_charity_pages/this-is-my-org.feature:42 # Scenario: Not Signed in User Who Fails Signin Once
cucumber features/individual_charity_pages/this-is-my-org.feature:53 # Scenario: Unregistered User
cucumber features/individual_charity_pages/this-is-my-org.feature:67 # Scenario: Unregistered User Who Fails Signin Once
cucumber features/individual_charity_pages/this-is-my-org.feature:82 # Scenario: I have requested admin status but am not yet approved, I will see a notice only on the show page for the requested org
cucumber features/sign_in_sign_up/password_retrieval.feature:24 # Scenario: Retrieving passwords
cucumber features/sign_in_sign_up/sign_in.feature:20 # Scenario: Sign in for an existing non-admin user unassociated with any organisation
cucumber features/sign_in_sign_up/sign_out.feature:12 # Scenario: Sign out
cucumber features/sign_in_sign_up/sign_up.feature:29 # Scenario: Sign up for a non-existent user
cucumber features/sign_in_sign_up/sign_up_link_to_org.feature:13 # Scenario: Sign up and CANNOT edit
cucumber features/sign_in_sign_up/sign_up_link_to_org.feature:20 # Scenario: Sign up and can edit
cucumber features/staticpages.feature:17 # Scenario: the about us page is accessible on all pages
cucumber features/staticpages.feature:17 # Scenario: the about us page is accessible on all pages
cucumber features/staticpages.feature:17 # Scenario: the about us page is accessible on all pages
cucumber features/staticpages.feature:28 # Scenario: the contact page is accessible on all pages
cucumber features/staticpages.feature:28 # Scenario: the contact page is accessible on all pages
cucumber features/staticpages.feature:28 # Scenario: the contact page is accessible on all pages
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:22 # Scenario: Org-admins can create a volunteer opportunity
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:28 # Scenario: Org-admins can create a volunteer opportunity but get warning with invalid data
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:33 # Scenario: Site Admin users can create Volunteer Opportunities
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:39 # Scenario: Signed In Users cannot create volunteer opportunities
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:44 # Scenario: Signed In Users cannot create volunteer opportunities on the sly
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:49 # Scenario: Not Signed In Users cannot create volunteer opportunities
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:53 # Scenario: Not Signed In Users cannot create volunteer opportunities on the sly
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:61 # Scenario: Org-admins can see a Volunteer Opportunity button when feature is enabled
cucumber features/volunteer_opportunities/create_volunteer_opportunities.feature:66 # Scenario: Org-admins cannot see a Volunteer Opportunity button when feature is disabled
cucumber features/volunteer_opportunities/list_volunteer_opportunities.feature:17 # Scenario: See a list of current volunteer opportunities
cucumber features/volunteer_opportunities/list_volunteer_opportunities.feature:23 # Scenario: Volunteer index page has two column layout
cucumber features/volunteer_opportunities/list_volunteer_opportunities.feature:27 # Scenario: Top navbar links to Volunteers and Organisations are hidden when feature is disabled
cucumber features/volunteer_opportunities/list_volunteer_opportunities.feature:27 # Scenario: Top navbar links to Volunteers and Organisations are hidden when feature is disabled
cucumber features/volunteer_opportunities/list_volunteer_opportunities.feature:36 # Scenario: Top navbar has links to Volunteers and Organisations when feature is enabled
cucumber features/volunteer_opportunities/list_volunteer_opportunities.feature:36 # Scenario: Top navbar has links to Volunteers and Organisations when feature is enabled
cucumber features/volunteer_opportunities/map_volunteer_opportunities.feature:21 # Scenario: See a map of current volunteer opportunities
cucumber features/volunteer_opportunities/map_volunteer_opportunities.feature:28 # Scenario: Volunteer opportunites are listed in map popups
cucumber features/volunteer_opportunities/map_volunteer_opportunities.feature:28 # Scenario: Volunteer opportunites are listed in map popups
cucumber features/volunteer_opportunities/map_volunteer_opportunities.feature:38 # Scenario: See map when editing my volunteer opportunity
cucumber features/volunteer_opportunities/show_volunteer_opportunity.feature:15 # Scenario: See a volunteer opportunity and hyperlink
cucumber features/volunteer_opportunities/show_volunteer_opportunity.feature:23 # Scenario: See URLs in volunteer opportunity pages are hyperlinked
cucumber features/volunteer_opportunities/show_volunteer_opportunity.feature:27 # Scenario: See emails in volunteer opportunity pages are hyperlinked

206 scenarios (151 failed, 23 skipped, 32 passed)
1541 steps (152 failed, 561 skipped, 828 passed)
1m8.594s
